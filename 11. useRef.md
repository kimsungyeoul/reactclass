`useRef`ëŠ” â€œDOMì„ ì¡ëŠ” Hookâ€ ì •ë„ë¡œë§Œ ì•Œê³  ê³„ì‹œë©´ **ë°˜ë§Œ** ì•„ì‹  ê²ë‹ˆë‹¤ ğŸ˜
ì‹¤ì œë¡œëŠ” **React ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ â€œë¦¬ë Œë”ë§ ì—†ì´ ê³„ì† ìœ ì§€ë˜ëŠ” ë°•ìŠ¤â€** ë¥¼ í•˜ë‚˜ ë§Œë“œëŠ” Hookì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

---

## 1. useRef í•œ ì¤„ ì •ì˜ âœ¨

```
const ref = useRef<T>(initialValue);
// refì˜ íƒ€ì…: { current: T }
```

```
function useRef(initialValue) {
  const hook = updateWorkInProgressHook(); // í•´ë‹¹ Fiber ë…¸ë“œì˜ Hook ìŠ¬ë¡¯ ê°€ì ¸ì˜¤ê¸°

  if (hook.memoizedState === null) {
    // ì²« ë Œë” â†’ ref ê°ì²´ ìƒì„±
    const refObject = { current: initialValue };
    hook.memoizedState = refObject;
    return refObject;
  } else {
    // ë¦¬ë¦¬ë Œë” â†’ ê¸°ì¡´ ê°ì²´ ê·¸ëŒ€ë¡œ ë°˜í™˜
    return hook.memoizedState;
  }
}
```

* **ì…ë ¥**: ì´ˆê¸° ê°’ (`initialValue`)
* **ì¶œë ¥**: `{ current: ... }`ë¼ëŠ” **ê°ì²´(Ref ê°ì²´)**
* ì´ ê°ì²´ëŠ” **ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ì–´ë„ ì ˆëŒ€ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•Šê³ , ê°™ì€ ê°ì²´ê°€ ê³„ì† ì¬ì‚¬ìš©**ë©ë‹ˆë‹¤.
* `ref.current` ê°’ì„ ë°”ê¿”ë„ **ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** â† í•µì‹¬

> ğŸ§  ì¦‰, `useRef`ëŠ” **â€œë¦¬ë Œë”ë§ê³¼ëŠ” ë…ë¦½ì ìœ¼ë¡œ ê¸°ì–µë˜ëŠ” í•œ ì¹¸ì§œë¦¬ ë©”ëª¨ë¦¬ ë°•ìŠ¤â€** ë¥¼ ë§Œë“œëŠ” Hookì…ë‹ˆë‹¤.

---

## 2. useRefëŠ” ì–¸ì œ ì“°ë‚˜ìš”? (3ê°€ì§€ ëŒ€í‘œ ìš©ë„) ğŸ¯

1. **DOM ìš”ì†Œì— ì§ì ‘ ì ‘ê·¼í•  ë•Œ**

   * í¬ì»¤ìŠ¤ ì£¼ê¸°, ìŠ¤í¬ë¡¤, í¬ê¸° ì¸¡ì • ë“±
2. **ë¦¬ë Œë”ë§ ì—†ì´ ê³„ì† ìœ ì§€ë˜ëŠ” ê°’ ì €ì¥**

   * ì´ì „ ê°’, íƒ€ì´ë¨¸ ID, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸ìŠ¤í„´ìŠ¤, í”Œë˜ê·¸(isMounted ë“±)
3. **ìì‹ ì»´í¬ë„ŒíŠ¸ì— â€œëª…ë ¹í˜• APIâ€ë¥¼ ì œê³µí•  ë•Œ**

   * `forwardRef`, `useImperativeHandle`ê³¼ í•¨ê»˜

ê° ìš©ë„ë³„ë¡œ êµ¬ì²´ì ìœ¼ë¡œ ë³´ê² ìŠµë‹ˆë‹¤.

---

## 3. ê°€ì¥ ë§ì´ ì“°ëŠ” íŒ¨í„´: DOM ì ‘ê·¼ ğŸ§±

### 3-1. ê¸°ë³¸ ì˜ˆì œ: ì…ë ¥ì°½ì— ìë™ í¬ì»¤ìŠ¤ ì£¼ê¸°

```jsx
import { useRef, useEffect } from "react";

function AutoFocusInput() {
  const inputRef = useRef(null); // ì´ˆê¸°ê°’: null

  useEffect(() => {
    // ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— â€œì»¤ë°‹â€ëœ í›„ ì‹¤í–‰
    if (inputRef.current) {
      inputRef.current.focus();
    }
  }, []);

  return <input ref={inputRef} placeholder="ìë™ í¬ì»¤ìŠ¤!" />;
}
```

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì  âœ…

* `ref={inputRef}` ë¼ê³  ì“°ë©´

  * Reactê°€ **ë Œë”+ì»¤ë°‹ ì´í›„ì—** ì‹¤ì œ DOM ìš”ì†Œë¥¼ `inputRef.current`ì— ë„£ì–´ì¤ë‹ˆë‹¤.
* `inputRef.current`ì˜ íƒ€ì…ì€ `HTMLInputElement | null`
* `useEffect` ì•ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” ì´ìœ :

  * ë Œë” ì¤‘ì—ëŠ” ì•„ì§ ì‹¤ì œ DOMì´ ì—†ê³ , **DOMì´ ì™„ì„±ëœ ë’¤ ì»¤ë°‹ ë‹¨ê³„ì—ì„œ refê°€ ì±„ì›Œì§€ê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤.

### 3-2. ìŠ¤í¬ë¡¤ ì œì–´ ì˜ˆì œ

```jsx
function ChatMessages({ messages }) {
  const bottomRef = useRef(null);

  useEffect(() => {
    if (bottomRef.current) {
      bottomRef.current.scrollIntoView({ behavior: "smooth" });
    }
  }, [messages.length]); // ìƒˆ ë©”ì‹œì§€ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤

  return (
    <div style={{ maxHeight: 300, overflowY: "auto" }}>
      {messages.map((m) => (
        <div key={m.id}>{m.text}</div>
      ))}
      <div ref={bottomRef} />
    </div>
  );
}
```

* `bottomRef`ê°€ ê°€ë¦¬í‚¤ëŠ” ë”ë¯¸ ìš”ì†Œê¹Œì§€ ìŠ¤í¬ë¡¤ì„ í•­ìƒ ë‚´ë ¤ì£¼ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
* DOM ì¡°ì‘ì€ ëŒ€ë¶€ë¶„ **useRef + useEffect** ì¡°í•©ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

---

## 4. "ë¦¬ë Œë” ì—†ì´ ê¸°ì–µë˜ëŠ” ê°’" ì €ì¥í•˜ê¸° ğŸ§ 

`useState`ì™€ ê°€ì¥ í° ì°¨ì´ì ì€:

* `useState`:

  * ê°’ì´ ë°”ë€Œë©´ â†’ ì»´í¬ë„ŒíŠ¸ **ë¦¬ë Œë”ë§ ë°œìƒ**
* `useRef`:

  * `ref.current` ë°”ë€Œì–´ë„ â†’ **ë¦¬ë Œë”ë§ ì—†ìŒ**

ê·¸ë˜ì„œ â€œUIì— ì§ì ‘ì ìœ¼ë¡œ í‘œì‹œí•˜ì§€ ì•Šì„ ê°’â€ì„ ì €ì¥í•  ë•Œ `useRef`ê°€ ë”±ì…ë‹ˆë‹¤.

### 4-1. ì´ì „ ê°’(prev value) ê¸°ì–µí•˜ê¸°

```jsx
import { useState, useRef, useEffect } from "react";

function Counter() {
  const [count, setCount] = useState(0);
  const prevCountRef = useRef(count); // ì´ˆê¸°ê°’: í˜„ì¬ count

  useEffect(() => {
    // ì´ ì´í™íŠ¸ê°€ ì‹¤í–‰ë  ë•Œ ì´ë¯¸ countëŠ” ìµœì‹  ê°’
    console.log("í˜„ì¬:", count, "ì´ì „:", prevCountRef.current);

    // ë‹¤ìŒ ë Œë”ì—ì„œ ì“¸ "ì´ì „ ê°’" ì €ì¥
    prevCountRef.current = count;
  }, [count]);

  return (
    <div>
      <p>í˜„ì¬ ê°’: {count}</p>
      <p>ì´ì „ ê°’: {prevCountRef.current}</p>
      <button onClick={() => setCount((c) => c + 1)}>+1</button>
    </div>
  );
}
```

* `prevCountRef.current`ëŠ” **ë¦¬ë Œë” ì‚¬ì´ì— ì‚´ì•„ë‚¨ëŠ” ê°’**ì…ë‹ˆë‹¤.
* `useState`ë¡œ `prevCount`ë¥¼ ê´€ë¦¬í•˜ë©´ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ê°€ ë” ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 4-2. íƒ€ì´ë¨¸ ID ì €ì¥ (setTimeout / setInterval)

```jsx
function Timer() {
  const [seconds, setSeconds] = useState(0);
  const intervalIdRef = useRef(null);

  const start = () => {
    if (intervalIdRef.current != null) return; // ì´ë¯¸ ë™ì‘ ì¤‘ì´ë©´ ë¬´ì‹œ

    const id = setInterval(() => {
      setSeconds((s) => s + 1);
    }, 1000);

    intervalIdRef.current = id; // ë¦¬ë Œë” ì—†ì´ ID ì €ì¥
  };

  const stop = () => {
    if (intervalIdRef.current != null) {
      clearInterval(intervalIdRef.current);
      intervalIdRef.current = null;
    }
  };

  useEffect(() => {
    return () => {
      // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì •ë¦¬
      if (intervalIdRef.current != null) {
        clearInterval(intervalIdRef.current);
      }
    };
  }, []);

  return (
    <div>
      <p>{seconds}ì´ˆ</p>
      <button onClick={start}>ì‹œì‘</button>
      <button onClick={stop}>ì •ì§€</button>
    </div>
  );
}
```

ì—¬ê¸°ì„œ `intervalId`ëŠ” **UIì— ë³´ì—¬ì¤„ ê°’ì´ ì•„ë‹ˆê³ , ë‹¨ì§€ ì •ë¦¬(cleanup)ìš©**ì´ë¯€ë¡œ
êµ³ì´ `useState`ë¡œ ê´€ë¦¬í•˜ì—¬ ë¦¬ë Œë”ë¥¼ íŠ¸ë¦¬ê±°í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤ â†’ `useRef`ê°€ ë” ì í•© âœ…

### 4-3. â€œì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜â€ì²˜ëŸ¼ ì“°ê¸° (í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ this.* ëŒ€ì²´)

í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ ì‹œì ˆì—ëŠ” ì´ëŸ° ì½”ë“œ ë§ì´ ë³´ì…¨ì„ ê²ë‹ˆë‹¤:

```js
class MyComponent extends React.Component {
  instanceValue = 0;
}
```

í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì´ê±¸ `useRef`ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.

```jsx
function MyComponent() {
  const instanceValueRef = useRef(0);

  const increase = () => {
    instanceValueRef.current += 1;
    console.log("í˜„ì¬ instanceValue:", instanceValueRef.current);
    // UIì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ë‹¨ìˆœ ê°’ ì €ì¥ì´ë¯€ë¡œ setState ë¶ˆí•„ìš”
  };

  return <button onClick={increase}>ë¡œê·¸ë§Œ ì¦ê°€</button>;
}
```

> ğŸ§  ìš”ì•½: **â€œUIì— ì•ˆ ë³´ì—¬ë„ ë˜ì§€ë§Œ, ë Œë” ì‚¬ì´ì— ê³„ì† ìœ ì§€ë˜ì–´ì•¼ í•˜ëŠ” ê°’â€ â†’ useRef**

---

## 5. useRefì˜ ë‚´ë¶€ ë™ì‘ & Fiber/Hook ìŠ¬ë¡¯ ê´€ì  ğŸ”¬

ì´ì „ì— ì—¬ì­¤ë³´ì…¨ë˜ ê²ƒì²˜ëŸ¼, ReactëŠ” ê° í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¥¼ **í•˜ë‚˜ì˜ Fiber ë…¸ë“œ**ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
ê° Fiberì—ëŠ” **Hookë“¤ì˜ â€œìŠ¬ë¡¯ ë°°ì—´â€**(linked list / ë°°ì—´ ë¹„ìŠ·í•œ êµ¬ì¡°)ì´ ìˆê³ ,
`useState`, `useEffect`, `useRef` ë“±ì´ ì´ ìŠ¬ë¡¯ì„ ì°¨ì§€í•©ë‹ˆë‹¤.

ëŒ€ëµì ì¸ ê°œë…ì  êµ¬ì¡°:

```ts
// ë§¤ìš° ë‹¨ìˆœí™”í•œ ê°œë…ì  í‘œí˜„
type Hook = {
  memoizedState: any; // useState: [value, dispatch], useRef: { current: ... }
  next: Hook | null;
};

type Fiber = {
  memoizedState: Hook | null; // ì²« ë²ˆì§¸ hook
  // ...
};
```

* `useRef(initialValue)`ë¥¼ í˜¸ì¶œí•˜ë©´

  * í˜„ì¬ Fiberì˜ hook ìŠ¬ë¡¯ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•´ì„œ
  * `memoizedState`ì— `{ current: ì´ˆê¸°ê°’ }`ì„ ì €ì¥í•©ë‹ˆë‹¤.
* ì´í›„ ë¦¬ë Œë”ì—ì„œëŠ”

  * **ê°™ì€ ìœ„ì¹˜ì˜ hook**ì„ ì°¾ì•„ì„œ ì´ì „ `memoizedState`ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš©
  * ê·¸ë˜ì„œ **ref ê°ì²´ì˜ identity(===)ëŠ” ë Œë” ì‚¬ì´ì— ìœ ì§€**ë©ë‹ˆë‹¤.
* `ref.current`ë¥¼ ë°”ê¾¸ë©´:

  * ì´ê±´ ë‹¨ìˆœíˆ JavaScript ê°ì²´ ì†ì„± ë³€ê²½ì´ê¸° ë•Œë¬¸ì—
  * Reactì—ê²Œ â€œë Œë” ìš”ì²­â€ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ â†’ ë¦¬ë Œë” ì—†ìŒ

> ê·¸ë˜ì„œ **Hookì˜ í˜¸ì¶œ ìˆœì„œ**ê°€ ë°”ë€Œë©´ ì•ˆ ë˜ëŠ” ì´ìœ ê°€ ì—¬ê¸°ì—ë„ ì ìš©ë©ë‹ˆë‹¤.
> `if` ë¬¸ ì•ˆì—ì„œ `useRef`ë¥¼ conditionally í˜¸ì¶œí•˜ë©´ Fiberì˜ hook ìŠ¬ë¡¯ ì—°ê²°ì´ ê¼¬ì—¬ë²„ë¦½ë‹ˆë‹¤.

---

## 6. createRefì™€ useRefì˜ ì°¨ì´ âš”ï¸

### 6-1. createRef

```jsx
import { createRef } from "react";

function MyComponent() {
  const inputRef = createRef(); // âŒ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ë ‡ê²Œ ì“°ë©´ ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆ ê°ì²´

  // ...
}
```

* `createRef()`ëŠ” **í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ref ê°ì²´ë¥¼ ìƒì„±**í•©ë‹ˆë‹¤.
* í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë Œë”ë§ˆë‹¤ ë‹¤ì‹œ ì‹¤í–‰ë˜ë¯€ë¡œ, refê°€ ë§¤ë²ˆ ìƒˆë¡œ ë§Œë“¤ì–´ì ¸ ë²„ë¦½ë‹ˆë‹¤.
* ê·¸ë˜ì„œ **í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” createRef ëŒ€ì‹  useRefë¥¼ ì‚¬ìš©**í•´ì•¼ í•©ë‹ˆë‹¤.

### 6-2. useRef

```jsx
function MyComponent() {
  const inputRef = useRef(null); // âœ… ë Œë” ì‚¬ì´ì—ë„ ë™ì¼í•œ ê°ì²´ ìœ ì§€
  // ...
}
```

* `useRef`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Fiberì˜ hook ìŠ¬ë¡¯ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì—

  * í•œ ë²ˆ ë§Œë“¤ì–´ì§„ ref ê°ì²´ë¥¼ ê³„ì† ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.

> ê²°ë¡ :
>
> * í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸: `createRef`
> * í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸: **`useRef`**

---

## 7. forwardRef + useRef: ìì‹ì—ê²Œ DOM/ë©”ì„œë“œ ë„˜ê¸°ê¸° ğŸ“¦

ë¶€ëª¨ê°€ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ DOMì— ì§ì ‘ ì ‘ê·¼í•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### 7-1. ë‹¨ìˆœ DOM ì „ë‹¬ (forwardRef)

```jsx
import { forwardRef, useRef } from "react";

const MyInput = forwardRef(function MyInput(props, ref) {
  return <input {...props} ref={ref} />;
});

function Form() {
  const inputRef = useRef(null);

  const handleClick = () => {
    if (inputRef.current) {
      inputRef.current.focus();
    }
  };

  return (
    <>
      <MyInput ref={inputRef} placeholder="forwardRef ì˜ˆì œ" />
      <button onClick={handleClick}>í¬ì»¤ìŠ¤</button>
    </>
  );
}
```

* `forwardRef`ëŠ” ë¶€ëª¨ì—ì„œ ë„˜ê¸´ `ref`ë¥¼ ìì‹ì´ ë‹¤ì‹œ DOMì— ë¶™ì¼ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
* ì´ ë°©ì‹ìœ¼ë¡œ **ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ëŠ” ë˜í¼ ì»´í¬ë„ŒíŠ¸ì—ë„ refë¥¼ ì „ë‹¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 7-2. ëª…ë ¹í˜• API ë§Œë“¤ê¸° (useImperativeHandleê³¼ í•¨ê»˜)

ì¡°ê¸ˆ ë” ì§„í™”ëœ í˜•íƒœ:

```jsx
import { forwardRef, useImperativeHandle, useRef } from "react";

const FancyInput = forwardRef(function FancyInput(props, ref) {
  const inputRef = useRef(null);

  useImperativeHandle(ref, () => ({
    focus() {
      inputRef.current?.focus();
    },
    clear() {
      if (inputRef.current) {
        inputRef.current.value = "";
      }
    },
  }));

  return <input ref={inputRef} {...props} />;
});

function Parent() {
  const fancyRef = useRef(null);

  return (
    <>
      <FancyInput ref={fancyRef} />
      <button onClick={() => fancyRef.current?.focus()}>í¬ì»¤ìŠ¤</button>
      <button onClick={() => fancyRef.current?.clear()}>ì§€ìš°ê¸°</button>
    </>
  );
}
```

* ë¶€ëª¨ëŠ” ì´ì œ `fancyRef.current.focus()` / `clear()` ê°™ì€ **ëª…ë ¹í˜• ë©”ì„œë“œ**ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì´ë•Œë„ ë‚´ë¶€ì ìœ¼ë¡œëŠ” ê²°êµ­ `useRef`ë¡œ DOMì„ ì¡ì•„ë‘ê³  ìˆìŠµë‹ˆë‹¤.

---

## 8. useRef vs useState vs useMemo/useCallback ë¹„êµ ğŸ§©

| ëª©ì                  | Hook             | ê°’ ë³€ê²½ ì‹œ ë¦¬ë Œë”?  | ì£¼ ì‚¬ìš©ì²˜                     |
| ------------------ | ------------- | ------------ | ------------------------- |
| UIì— ì§ì ‘ ë°˜ì˜ë˜ëŠ” ìƒíƒœ     | `useState`    | âœ… ì˜ˆ          | ì¹´ìš´í„°, ì…ë ¥ê°’ ë“±                |
| ê°’ì€ ê¸°ì–µí•˜ë˜, ë¦¬ë Œë” í•„ìš” ì—†ìŒ | `useRef`      | âŒ ì•„ë‹ˆìš”        | íƒ€ì´ë¨¸ ID, ì´ì „ ê°’, í”Œë˜ê·¸, DOM ì°¸ì¡° |
| ê³„ì‚° ë¹„ìš©ì´ í° ê°’ ìºì‹±      | `useMemo`     | (ì˜ì¡´ì„± ë³€ê²½ ì‹œ) âœ… | ë¬´ê±°ìš´ ê³„ì‚° ê²°ê³¼                 |
| í•¨ìˆ˜ë¥¼ ë©”ëª¨ì´ì œì´ì…˜         | `useCallback` | (ì˜ì¡´ì„± ë³€ê²½ ì‹œ) âœ… | ì½œë°± ì¬ìƒì„± ë°©ì§€                 |

> ê°„ë‹¨íˆ:
> **â€œí™”ë©´ì— ë³´ì´ëŠ” ê°’â€ì€ `useState`,
> â€œí™”ë©´ì—ëŠ” ì•ˆ ë³´ì´ì§€ë§Œ ê¸°ì–µí•´ì•¼ í•˜ëŠ” ê°’â€ì€ `useRef`.**

---

## 9. useRef ì‚¬ìš©í•  ë•Œ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤ âš ï¸

### 9-1. `ref.current` ë°”ê¾¸ë©´ ë¦¬ë Œë” ëœë‹¤ê³  ì°©ê°í•˜ê¸°

```jsx
const countRef = useRef(0);

const handleClick = () => {
  countRef.current += 1;
  console.log(countRef.current);
  // ì—¬ê¸°ì„œ UIì— countRef.currentë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤ë©´, í™”ë©´ì€ ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤.
};
```

* í™”ë©´ì— ë³´ì—¬ì£¼ê³  ì‹¶ë‹¤ë©´ ë°˜ë“œì‹œ `useState`ì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### 9-2. ë Œë” ì¤‘ì— `ref.current` ê°’ì„ ë¯¿ì–´ë²„ë¦¬ê¸°

```jsx
function Component() {
  const divRef = useRef(null);

  console.log(divRef.current); // ì—¬ê¸°ì„œëŠ” ë³´í†µ null (ë Œë” ì¤‘)

  return <div ref={divRef} />;
}
```

* ë Œë” ì¤‘ì—ëŠ” ì•„ì§ DOMì´ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
* **DOMì„ ì‚¬ìš©í•œ ë¡œì§ì€ ë°˜ë“œì‹œ `useEffect` / `useLayoutEffect`ì—ì„œ ìˆ˜í–‰**í•´ì•¼ í•©ë‹ˆë‹¤.

### 9-3. Strict Modeì—ì„œ â€œë‘ ë²ˆ í˜¸ì¶œâ€ ê´€ë ¨ í˜¼ë€

React 18ì˜ StrictModeì—ì„œëŠ” ê°œë°œ ëª¨ë“œì—ì„œ

* ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ê°€ **ì˜ë„ì ìœ¼ë¡œ ë‘ ë²ˆ ë§ˆìš´íŠ¸-ì–¸ë§ˆìš´íŠ¸** ë˜ì—ˆë‹¤ê°€ ë‹¤ì‹œ ë§ˆìš´íŠ¸ë©ë‹ˆë‹¤.
* ì´ë•Œ `useEffect` / `useRef` ì´ˆê¸°í™”/ì •ë¦¬ ë¡œì§ì´ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆì–´ í˜¼ë€ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ë”°ë¼ì„œ íƒ€ì´ë¨¸ë‚˜ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™” ì‹œ

  * ì •ë¦¬(cleanup) ë¡œì§ì„ ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.

### 9-4. Controlled vs Uncontrolled í˜¼í•©

`ref`ë¡œ DOMì˜ valueë¥¼ ì§ì ‘ ì¡°ì‘í•˜ë©´ì„œ ë™ì‹œì— `value` propsë¡œ ì œì–´í•˜ë ¤ í•˜ë©´ í˜¼ë€ì´ ìƒê¹ë‹ˆë‹¤.

```jsx
// ì•ˆ ì¢‹ì€ íŒ¨í„´ ì˜ˆì‹œ
<input
  ref={inputRef}
  value={text}
  onChange={(e) => {
    setText(e.target.value);
    inputRef.current.value = "ë­”ê°€ ë®ì–´ì“°ê¸°"; // ì´ëŸ° ê±´ ë³´í†µ í”¼í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.
/>
```

* â€œìƒíƒœëŠ” Reactê°€ ê´€ë¦¬í•œë‹¤â€ vs â€œDOMì„ ì§ì ‘ ê´€ë¦¬í•œë‹¤â€ë¥¼ ì„ìœ¼ë©´ ë””ë²„ê¹…ì´ í˜ë“¤ì–´ì§‘ë‹ˆë‹¤.
* ì¼ë°˜ì ìœ¼ë¡œ:

  * í¼ì„ **React ìƒíƒœë¡œ ì œì–´**í• ì§€ (controlled)
  * **DOMì— ë§¡ê¸¸ì§€(uncontrolled + refë¡œ ì½ê¸°)** ë¥¼ ì²˜ìŒë¶€í„° ì „ëµì ìœ¼ë¡œ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

## 10. callback refì™€ useRefì˜ ì°¨ì´ ğŸ”„

`ref`ì—ëŠ” ë‹¨ìˆœíˆ ê°ì²´ ë§ê³  **í•¨ìˆ˜(ì½œë°±)**ë„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
function Component() {
  const handleRef = (node) => {
    if (node) {
      // mount ì‹œ
      console.log("DOM ì—°ê²°:", node);
    } else {
      // unmount ì‹œ
      console.log("DOM í•´ì œ");
    }
  };

  return <div ref={handleRef} />;
}
```

* callback refëŠ” **DOMì´ ë°”ë€” ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ í˜¸ì¶œ**ë©ë‹ˆë‹¤.
* `useRef`ëŠ” ë‹¨ìˆœíˆ ê°ì²´ì— ë„£ì–´ë‘ëŠ” ë°˜ë©´,

  * callback refëŠ” í›¨ì”¬ ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
* ë‹¤ë§Œ, ëŒ€ë¶€ë¶„ì˜ ê²½ìš° `useRef`ë¡œ ì¶©ë¶„í•˜ê³ ,

  * ì•„ì£¼ íŠ¹ìˆ˜í•œ ìƒí™©(ì˜ˆ: ref ë³€ê²½ ì´ë²¤íŠ¸ë¥¼ ë°”ë¡œ ê°ì§€í•´ì•¼ í•˜ëŠ” ê²½ìš°)ì— callback refë¥¼ ì”ë‹ˆë‹¤.

---

## 11. ì •ë¦¬: useRefë¥¼ ì“¸ ë•Œ ë– ì˜¬ë ¤ì•¼ í•  ì²´í¬ë¦¬ìŠ¤íŠ¸ âœ…

1. **ì´ ê°’ì´ ë°”ë€Œì–´ë„ ë¦¬ë Œë”ê°€ í•„ìš” ì—†ëŠ”ê°€?**

   * ì˜ˆ: íƒ€ì´ë¨¸ ID, ì´ì „ ê°’, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸ìŠ¤í„´ìŠ¤ â†’ `useRef`
2. **DOM ìš”ì†Œì— í¬ì»¤ìŠ¤/ìŠ¤í¬ë¡¤/ì¸¡ì • ë“± ì§ì ‘ ì ‘ê·¼í•´ì•¼ í•˜ëŠ”ê°€?**

   * ì˜ˆ: `input`, `video`, `div` ë“±ì˜ DOM â†’ `useRef + ref ì†ì„± + useEffect`
3. **ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ëª…ë ¹í˜• APIë¥¼ ì£¼ê³  ì‹¶ì€ê°€?**

   * ì˜ˆ: `focus()`, `open()`, `reset()` â†’ `forwardRef + useRef (+ useImperativeHandle)`
4. **UIì— ë³´ì—¬ì¤„ ê°’ì¸ê°€?**

   * ê·¸ëŸ¬ë©´ `useState` ë˜ëŠ” ê·¸ ì™¸ ìƒíƒœ ê´€ë¦¬ê°€ ìš°ì„ ì…ë‹ˆë‹¤.

---



# 🚀 Nodemon: Node.js 개발자가 꼭 알아야 할 자동 리로드 도구


Node.js로 서버 개발을 하다 보면 코드를 조금만 수정해도 매번 **서버를 재시작**해야 하는 불편함을 겪게 됩니다. 특히 Express 기반의 REST API나 WebSocket 서버를 개발할 때는 “파일 저장 → 서버 종료 → 다시 실행”을 반복해야 하죠.
이 지루하고 반복적인 과정을 해결해주는 영웅이 바로 **Nodemon** 입니다. 😎🔥

---

# 1. 📌 Nodemon이란 무엇인가?

**Nodemon**은 **Node.js 애플리케이션의 소스 파일을 감시(watch)하여 파일이 변경되면 자동으로 서버를 재시작해주는 개발용 도구**입니다.

> 👉 즉, “저장만 하면 서버가 자동으로 리로드되는 Node.js 개발 환경”을 만들어 줍니다.

### 왜 필요한가?

* Node.js 앱은 변경사항을 반영하려면 **프로세스를 다시 실행해야 함**
* 수십~수백 번 반복되는 불필요한 작업 제거
* 개발 속도 향상
* 휴먼 에러 감소 (재시작 안 했는데 왜 로그가 안 찍히지? 같은 문제 방지)

---

# 2. 🛠 Nodemon 설치 방법

Nodemon은 **전역 설치**와 **개발 의존성 설치** 두 가지 방식이 있습니다.

### 🔹 ① 전역 설치 (Global install)

```bash
npm install -g nodemon
```

* 어디서든 `nodemon` 명령어 사용 가능
* 단, 팀 개발에서는 버전 차이가 발생할 수 있음

### 🔹 ② 개발 의존성 설치 (권장)

```bash
npm install --save-dev nodemon
```

* `package.json`의 `devDependencies`에 등록됨
* 팀 전체가 동일한 버전으로 개발 가능 ✔

---

# 3. ▶ nodemon 실행 방법

## 🔹 기본 실행

```bash
nodemon server.js
```

## 🔹 npm script로 실행 (추천 👍)

`package.json`에 다음과 같이 설정합니다:

```json
{
  "scripts": {
    "dev": "nodemon server.js"
  }
}
```

이제 실행은 아래처럼 단순해집니다:

```bash
npm run dev
```

---

# 4. 🔍 Nodemon이 감시하는 파일들 (watching)

디폴트로 nodemon은 다음 확장자를 감시합니다:

* `.js`
* `.mjs`
* `.json`

그러나 개인/팀 환경에 따라 감시 범위를 자유롭게 설정할 수 있습니다.

### ✔ 특정 디렉토리만 감시

```bash
nodemon --watch src --watch config
```

### ✔ 특정 확장자만 감시

```bash
nodemon --ext js,ts,json
```

---

# 5. ⚙ Nodemon 설정 파일(nodemon.json) 사용하기

대규모 프로젝트에서는 옵션을 CLI로 매번 입력하기 번거롭기 때문에 **설정 파일**을 사용합니다.

### 📄 nodemon.json 예시

```json
{
  "watch": ["src", "config"],
  "ext": "js,json,ts",
  "ignore": ["node_modules"],
  "exec": "node app.js",
  "delay": "500"
}
```

### 설정 설명 ✨

| 옵션         | 설명                                     |
| ---------- | -------------------------------------- |
| **watch**  | 감시할 폴더/파일                              |
| **ext**    | 감시할 파일 확장자                             |
| **ignore** | 감시 제외 디렉토리                             |
| **exec**   | 실행할 커맨드 지정 (ex. ts-node, babel-node 등) |
| **delay**  | 파일 변경 감지 후 실행 지연 시간                    |

---

# 6. 🧠 Nodemon 내부 동작 원리

Nodemon은 파일 시스템 이벤트(FS Event)를 기반으로 동작합니다.

1. **파일 감시(watcher)**

   * Node.js의 `fs.watch()` 또는 더 안정적인 감시 라이브러리 `chokidar` 사용
   * OS마다 파일 변경 이벤트 방식이 다르기 때문에 추상화해서 제공

2. **파일 변경 감지**

   * 변경된 파일의 확장자가 watch 대상인지 확인

3. **프로세스 종료 후 재시작**

   * 기존 Node 프로세스를 kill
   * 지정된 exec 명령으로 재실행

4. **콘솔 로그 표시**

   * “restarting due to changes…” 등 변경된 파일 목록 출력

📌 즉, nodemon은 개발자가 신경 쓰지 않아도 되는 “재시작 자동화 파이프라인”을 구축해주는 dev tool입니다.

---

# 7. 🔥 실전 예제: Express 서버 자동 재시작

### ① server.js

```js
const express = require("express");
const app = express();

app.get("/", (req, res) => {
  res.send("Hello Nodemon!");
});

app.listen(3000, () => {
  console.log("Server running on port 3000 🚀");
});
```

### ② 실행

```bash
nodemon server.js
```

### ③ 파일을 수정해보면?

콘솔에 이렇게 출력됩니다:

```
[nodemon] restarting due to changes...
[nodemon] starting `node server.js`
Server running on port 3000 🚀
```

---

# 8. 🧩 Nodemon + TypeScript

TypeScript 환경에서는 보통 `ts-node` 또는 `ts-node-dev`와 함께 사용합니다.

### 설치

```bash
npm install --save-dev ts-node typescript nodemon
```

### nodemon.json

```json
{
  "watch": ["src"],
  "ext": "ts",
  "exec": "ts-node src/index.ts"
}
```

---

# 9. 💡 Nodemon의 장점 요약

| 장점                | 설명                                 |
| ----------------- | ---------------------------------- |
| ⚡ 빠른 개발 사이클       | 저장 → 자동 재시작 = 개발 속도 상승             |
| 🧽 재시작 실수 방지      | 매번 서버 껐다 켤 필요 없음                   |
| 🧩 다양한 설정 가능      | watch, ignore, ext 등 세밀한 조정 가능     |
| 🛠 여러 실행 엔진 사용 가능 | babel-node, ts-node 등과 조합 가능       |
| 🌍 운영환경에 영향 없음    | 개발용 도구(dev tool) → 빌드나 배포에 포함되지 않음 |

---

# 10. 📦 PM2와 차이점 (중요)

| 비교 항목 | Nodemon | PM2                 |
| ----- | ------- | ------------------- |
| 용도    | 개발환경    | 운영환경(프로덕션)          |
| 기능    | 자동 재시작  | 로드밸런싱, 모니터링, 로그, 배포 |
| 성능    | 단순 감시   | 고성능 프로세스 관리자        |
| 대상    | 개발자     | DevOps / 서버 운영      |

👉 개발 중에는 **Nodemon**, 배포 시에는 **PM2**를 사용하면 완벽합니다.

---

# ✨ 마무리

Nodemon은 Node.js 개발에서 가장 기본적이지만 **생산성을 극적으로 상승시키는 필수 도구**입니다.
서버를 매번 껐다 켜는 번거로운 루틴을 없애고, 개발에만 집중할 수 있게 도와주는 든든한 개발 파트너죠. 💪🔥


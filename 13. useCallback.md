ë¦¬ì•¡íŠ¸ì˜ `useCallback`ì€ **â€œí•¨ìˆ˜ ë²„ì „ì˜ useMemoâ€** ë¼ê³  ìƒê°í•˜ì‹œë©´ ì´í•´ê°€ í›¨ì”¬ ì‰½ìŠµë‹ˆë‹¤.
â€œí•¨ìˆ˜ë„ ê°’ì´ë‹¤â€ë¼ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ íŠ¹ì„± ë•Œë¬¸ì— ë“±ì¥í•œ í›…ì´ì—ìš”. ğŸ˜

ì•„ë˜ì—ì„œ í•˜ë‚˜ì”© ì•„ì£¼ ê¹Šê²Œ íŒŒë³´ê² ìŠµë‹ˆë‹¤.

---

## 1. useCallbackì´ ì™œ ì¡´ì¬í•˜ë‚˜ìš”? ğŸ¤”

ë¨¼ì € ë¬¸ì œ ìƒí™©ë¶€í„° ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
function Parent() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    console.log('clicked!');
  };

  return (
    <div>
      <button onClick={() => setCount(c => c + 1)}>+</button>
      <Child onClick={handleClick} />
    </div>
  );
}

const Child = React.memo(function Child({ onClick }) {
  console.log('Child render');
  return <button onClick={onClick}>Child Button</button>;
});
```

ì—¬ê¸°ì„œ `Parent`ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤:

* `handleClick` **í•¨ìˆ˜ê°€ ìƒˆë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤**. (`() => { ... }`ëŠ” í•¨ìˆ˜ ë¦¬í„°ëŸ´)
* ìë°”ìŠ¤í¬ë¦½íŠ¸ ì…ì¥ì—ì„œ **ì´ì „ ë Œë”ì—ì„œ ë§Œë“  í•¨ìˆ˜ì™€ â€œì°¸ì¡°(ì£¼ì†Œ)â€ê°€ ë‹¤ë¦…ë‹ˆë‹¤.**
* ê·¸ë˜ì„œ `Child` ì»´í¬ë„ŒíŠ¸ ì…ì¥ì—ì„œëŠ”
  `props.onClick`ì´ **ë§¤ë²ˆ ìƒˆ ê°’ì²˜ëŸ¼ ë³´ì´ê³ **,
  `React.memo`ë¥¼ ì¨ë„ â€œpropsê°€ ë³€í•œ ê²ƒìœ¼ë¡œ íŒë‹¨â€ â†’ ë§¤ë²ˆ ë¦¬ë Œë”ë§ ğŸ˜µ

> ì¦‰, â€œí•¨ìˆ˜ëŠ” ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ëŠ” ê°’â€ì´ê¸° ë•Œë¬¸ì—
> **React.memo + ì½œë°± props ì¡°í•©**ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ **`useCallback`** ì…ë‹ˆë‹¤.

---

## 2. useCallback í•œ ì¤„ ì •ì˜ âœï¸

> **`useCallback`ì€ â€œí•¨ìˆ˜â€ë¥¼ ê¸°ì–µ(memoize)í•´ì„œ,**
> **ì˜ì¡´ì„± ë°°ì—´(deps)ì´ ë³€í•˜ì§€ ì•ŠëŠ” ë™ì•ˆ ê°™ì€ í•¨ìˆ˜ ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ê²Œ í•´ì£¼ëŠ” í›…**ì…ë‹ˆë‹¤.

ì‹œê·¸ë‹ˆì²˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```ts
const memoizedCallback = useCallback(
  (/* ...args */) => {
    // ...do something...
  },
  [dep1, dep2, ...]
);
```

* ì²« ë²ˆì§¸ ì¸ì: **ì €ì¥í•  ì½œë°± í•¨ìˆ˜**
* ë‘ ë²ˆì§¸ ì¸ì: **ì˜ì¡´ì„± ë°°ì—´(deps)**
  â†’ ì—¬ê¸°ì— ìˆëŠ” ê°’ì´ ë°”ë€” ë•Œì—ë§Œ **ìƒˆ ì½œë°±ì´ ë§Œë“¤ì–´ì§€ê³  ì €ì¥**ë©ë‹ˆë‹¤.

ê¸°ë³¸ ê°œë…ì€ `useMemo`ì™€ ë˜‘ê°™ìŠµë‹ˆë‹¤.

```jsx
// ê°’(value)ì„ ê¸°ì–µí•˜ê³  ì‹¶ìœ¼ë©´ useMemo
const memoizedValue = useMemo(() => expensiveComputation(a, b), [a, b]);

// í•¨ìˆ˜(function)ë¥¼ ê¸°ì–µí•˜ê³  ì‹¶ìœ¼ë©´ useCallback
const memoizedCallback = useCallback(() => doSomething(a, b), [a, b]);
```

---

## 3. ê°€ì¥ ëŒ€í‘œì ì¸ ì‚¬ìš©ì²˜ 3ê°€ì§€ ğŸ¯

### (1) React.memo + ì½œë°± props ìµœì í™”

ì•„ê¹Œ ê·¸ ì˜ˆì œë¥¼ `useCallback`ìœ¼ë¡œ ìˆ˜ì •í•´ ë´…ì‹œë‹¤.

```jsx
import React, { useState, useCallback } from 'react';

const Child = React.memo(function Child({ onClick }) {
  console.log('Child render');
  return <button onClick={onClick}>Child Button</button>;
});

function Parent() {
  const [count, setCount] = useState(0);

  const handleClick = useCallback(() => {
    console.log('clicked!');
  }, []); // âœ… depsê°€ ë¹ˆ ë°°ì—´ â†’ í•­ìƒ ê°™ì€ í•¨ìˆ˜ ê°ì²´

  console.log('Parent render');

  return (
    <div>
      <p>count: {count}</p>
      <button onClick={() => setCount(c => c + 1)}>+</button>
      <Child onClick={handleClick} />
    </div>
  );
}

export default Parent;
```

ì´ì œ:

* `Parent`ê°€ `count` ë•Œë¬¸ì— ê³„ì† ë Œë”ë§ë˜ì–´ë„
* `handleClick`ì˜ **ì°¸ì¡°(ì£¼ì†Œ)ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€**ë©ë‹ˆë‹¤.
* `Child` ì…ì¥ì—ì„œëŠ” `props.onClick`ì´ **ì•ˆ ë³€í•œ ê²ƒì²˜ëŸ¼ ë³´ì„**
* `React.memo`ì— ì˜í•´ `Child`ëŠ” **ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ í”¼í•¨** âœ…

---

### (2) ì˜ì¡´ì„± ë°°ì—´ì— í•¨ìˆ˜ ë„£ì–´ì•¼ í•  ë•Œ (useEffect ë“±)

`useEffect`ë‚˜ `useMemo`ì—ì„œ **í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ë„£ì–´ì•¼ í•˜ëŠ”** ìƒí™©ì´ ìˆìŠµë‹ˆë‹¤.

```jsx
function SearchBox({ query }) {
  const [result, setResult] = useState(null);

  const fetchData = () => {
    // queryë¥¼ ì‚¬ìš©í•´ì„œ API í˜¸ì¶œ
  };

  useEffect(() => {
    fetchData();
  }, [fetchData]); // âŒ fetchDataëŠ” ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§
}
```

ìœ„ ì½”ë“œëŠ”:

* `fetchData`ê°€ ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ë¯€ë¡œ,
* `useEffect`ì˜ depsì— `fetchData`ê°€ ë“¤ì–´ìˆìœ¼ë©´
* **ë§¤ ë Œë”ë§ˆë‹¤ effectê°€ ë‹¤ì‹œ ì‹¤í–‰** â†’ ë¬´í•œ API í˜¸ì¶œê¹Œì§€ ë²ˆì§ˆ ìˆ˜ ìˆìŒ ğŸ˜±

`useCallback`ì„ ì‚¬ìš©í•˜ë©´:

```jsx
function SearchBox({ query }) {
  const [result, setResult] = useState(null);

  const fetchData = useCallback(() => {
    // queryë¥¼ ì‚¬ìš©í•´ì„œ API í˜¸ì¶œ
    console.log('fetch with', query);
  }, [query]); // âœ… queryê°€ ë³€í•  ë•Œë§Œ ìƒˆ í•¨ìˆ˜

  useEffect(() => {
    fetchData();
  }, [fetchData]); // âœ… fetchDataê°€ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë¨

  return <div>ê²€ìƒ‰ ê²°ê³¼: {JSON.stringify(result)}</div>;
}
```

* `query`ê°€ ë°”ë€” ë•Œì—ë§Œ `fetchData`ê°€ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤.
* ê·¸ ë•Œë§Œ effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤.
* ì˜ì¡´ì„± ë°°ì—´ì— í•¨ìˆ˜ë¥¼ ë„£ì–´ì•¼ í•  ë•Œ, `useCallback`ìœ¼ë¡œ **í•¨ìˆ˜ì˜ ì•ˆì •ì„±ì„ ë³´ì¥**í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

---

### (3) stable referenceê°€ í•„ìš”í•œ ê³³ë“¤ (ì»¤ìŠ¤í…€ í›…, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±)

ì¼ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ ì»¤ìŠ¤í…€ í›…ì€ **ì½œë°± ì°¸ì¡°ê°€ ë°”ë€Œì§€ ì•Šê¸°ë¥¼ ìš”êµ¬**í•©ë‹ˆë‹¤.

ì˜ˆ: ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ìš© ì»¤ìŠ¤í…€ í›…

```jsx
function useWindowEvent(eventName, handler) {
  useEffect(() => {
    window.addEventListener(eventName, handler);
    return () => window.removeEventListener(eventName, handler);
  }, [eventName, handler]);
}
```

ì´ì œ ì´ í›…ì„ ì‚¬ìš©í•  ë•Œ:

```jsx
function Component() {
  const [count, setCount] = useState(0);

  const handleResize = () => {
    console.log('resize', count);
  };

  useWindowEvent('resize', handleResize); // âŒ handleResize ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±

  return <button onClick={() => setCount(c => c + 1)}>+</button>;
}
```

ì´ ê²½ìš°:

* ë Œë”ë§ë§ˆë‹¤ `handleResize`ê°€ ìƒˆë¡œ ìƒì„± â†’ effect ë‹¤ì‹œ ì‹¤í–‰ â†’
  **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê³„ì† ë“±ë¡/í•´ì œ**ë¥¼ ë°˜ë³µí•  ìˆ˜ ìˆìŒ.

`useCallback`ìœ¼ë¡œ ê³ ì •:

```jsx
function Component() {
  const [count, setCount] = useState(0);

  const handleResize = useCallback(() => {
    console.log('resize', count);
  }, [count]); // âœ… countê°€ ë³€í•  ë•Œì—ë§Œ ìƒˆ í•¨ìˆ˜

  useWindowEvent('resize', handleResize);

  return <button onClick={() => setCount(c => c + 1)}>+</button>;
}
```

---

## 4. useCallback ë‚´ë¶€ ë™ì‘ (ì •ì‹  ë‚˜ê°„ ë””í…Œì¼ ë²„ì „) ğŸ§ 

ì´ ë¶€ë¶„ì€ ì„ ìƒë‹˜ì´ ì¢‹ì•„í•˜ì‹œëŠ” **Hook ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ + Fiber ê´€ì **ìœ¼ë¡œ ì„¤ëª…ë“œë¦´ê²Œìš”.

ì•„ì£¼ ë‹¨ìˆœí™”í•´ì„œ ë³´ë©´, ReactëŠ” ê° í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤:

```ts
type Hook = {
  memoizedState: any;  // useStateë©´ state, useMemo/useCallbackì´ë©´ { value, deps } ë“±
  next: Hook | null;
};

type FiberNode = {
  memoizedState: Hook | null; // ì´ ì»´í¬ë„ŒíŠ¸ì˜ ì²« ë²ˆì§¸ Hook
  // ...
};
```

`useCallback(fn, deps)`ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œì˜ íë¦„(ê·¹ë‹¨ì  ë‹¨ìˆœí™”):

1. **í˜„ì¬ ë Œë”ì˜ â€œhook cursorâ€ ìœ„ì¹˜ì— í•´ë‹¹í•˜ëŠ” Hookì„ êº¼ëƒ…ë‹ˆë‹¤.**
2. ì²« ë Œë”ë¼ë©´:

   * ìƒˆë¡œìš´ Hookì„ ë§Œë“¤ê³ 
   * `hook.memoizedState = { callback: fn, deps }` í˜•íƒœë¡œ ì €ì¥í•©ë‹ˆë‹¤.
   * ì´ ë•Œ **`fn`ì´ â€œì›ë³¸ í•¨ìˆ˜â€**ì…ë‹ˆë‹¤.
3. ì´í›„ ë Œë”ë¶€í„°ëŠ”:

   * ì´ì „ ë Œë”ì˜ `hook.memoizedState.deps`ì™€ ì´ë²ˆ ë Œë”ì˜ `deps`ë¥¼ **shallow equal ë¹„êµ**í•©ë‹ˆë‹¤.
   * ê°™ìœ¼ë©´:

     * `hook.memoizedState.callback`ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜ (ì´ì „ í•¨ìˆ˜ ê°ì²´ ì¬ì‚¬ìš©)
   * ë‹¤ë¥´ë©´:

     * `hook.memoizedState.callback`ì„ ìƒˆë¡œìš´ `fn`ìœ¼ë¡œ êµì²´
     * `hook.memoizedState.deps`ë„ ìƒˆë¡œìš´ depsë¡œ êµì²´
     * ìƒˆ í•¨ìˆ˜ ê°ì²´ë¥¼ ë°˜í™˜

ê°œë…ì ìœ¼ë¡œëŠ” ì´ë ‡ê²Œ ì˜ì‚¬ ì½”ë“œë¡œ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```js
function useCallback(fn, deps) {
  const hook = getCurrentHook();

  if (!hook) {
    // mount
    const state = { callback: fn, deps };
    mountWorkInProgressHook(state);
    return fn;
  } else {
    // update
    const prevState = hook.memoizedState;
    if (areHookInputsEqual(prevState.deps, deps)) {
      // depsê°€ ê·¸ëŒ€ë¡œë©´ ì´ì „ callback ì¬ì‚¬ìš©
      return prevState.callback;
    } else {
      // depsê°€ ë°”ë€Œë©´ ìƒˆë¡œìš´ callback ì €ì¥
      const state = { callback: fn, deps };
      hook.memoizedState = state;
      return fn;
    }
  }
}
```

í•µì‹¬ í¬ì¸íŠ¸ëŠ”:

> â€œ**depsê°€ ë³€í•˜ì§€ ì•Šìœ¼ë©´, ì´ì „ ë Œë”ì—ì„œ ì €ì¥í•´ ë‘” í•¨ìˆ˜ ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ëŒë ¤ì¤€ë‹¤**â€
> â†’ ê·¸ë˜ì„œ **ì°¸ì¡°(ì£¼ì†Œ)ê°€ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€**ë©ë‹ˆë‹¤.

---

## 5. useCallback vs useMemo ë¹„êµ ğŸ§¬

ìì£¼ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ì´ë¼, ëª…í™•í•˜ê²Œ ì˜ë¼ì„œ ì •ë¦¬í•´ ë³´ê² ìŠµë‹ˆë‹¤.

### ê³µí†µì 

* ë‘˜ ë‹¤ **memoization í›…**ì…ë‹ˆë‹¤.
* ë‘˜ ë‹¤ **deps ë°°ì—´**ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ì „ ê°’ê³¼ ë¹„êµí•©ë‹ˆë‹¤.
* depsê°€ ê°™ìœ¼ë©´ ì´ì „ì— ì €ì¥í•´ë‘” ê²ƒì„ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.

### ì°¨ì´ì 

```jsx
// useMemo: "ê°’"ì„ ë©”ëª¨ì´ì¦ˆ
const value = useMemo(() => {
  return someExpensiveCalculation(a, b);
}, [a, b]);

// useCallback: "í•¨ìˆ˜"ë¥¼ ë©”ëª¨ì´ì¦ˆ
const callback = useCallback(() => {
  doSomething(a, b);
}, [a, b]);
```

* `useMemo`ëŠ” ì½œë°±ì„ **ë°”ë¡œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜¨ ê²°ê³¼(ê°’)** ë¥¼ ì €ì¥
* `useCallback`ì€ ì½œë°± **ìì²´(í•¨ìˆ˜ ê°ì²´)** ë¥¼ ì €ì¥

ì—„ë°€í•˜ê²Œ ë§í•˜ë©´:

```jsx
useCallback(fn, deps) === useMemo(() => fn, deps)
```

ì´ ë‘ ì¤„ì€ **ë™ì¼í•œ ì˜ë¯¸**ì…ë‹ˆë‹¤. (React ê³µì‹ ë¬¸ì„œì—ì„œë„ ë™ì¼í•˜ë‹¤ê³  ì–¸ê¸‰)

---

## 6. ì˜ì¡´ì„± ë°°ì—´(deps) ì„¤ê³„ & stale closure ë¬¸ì œ âš ï¸

### (1) depsë¥¼ ì˜ëª» ì ìœ¼ë©´ ìƒê¸°ëŠ” ë¬¸ì œ

```jsx
function Counter() {
  const [count, setCount] = useState(0);

  const log = useCallback(() => {
    console.log('count:', count);
  }, []); // âŒ depsë¥¼ []ë¡œ ì§€ì •

  useEffect(() => {
    const id = setInterval(log, 1000);
    return () => clearInterval(id);
  }, [log]);

  return <button onClick={() => setCount(c => c + 1)}>+</button>;
}
```

ì—¬ê¸°ì„œ `log`ëŠ”:

* ë§ˆìš´íŠ¸ ì‹œì ì˜ `count` ê°’ì„ ìº¡ì²˜í•œ **í´ë¡œì €**ì…ë‹ˆë‹¤.
* depsê°€ `[]`ë¼ì„œ ì´í›„ ë Œë”ì—ì„œ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•ŠìŒ.
* ë”°ë¼ì„œ **ê³„ì† `0`ë§Œ ì¶œë ¥**í•©ë‹ˆë‹¤. (stale closure)

ğŸ‘‰ í•´ê²°í•˜ë ¤ë©´:

1. ì§„ì§œë¡œ **ìµœì‹  countë¥¼ ì“°ê³  ì‹¶ë‹¤**ë©´, depsì— `count`ë¥¼ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.

   ```jsx
   const log = useCallback(() => {
     console.log('count:', count);
   }, [count]); // âœ… count ë³€ê²½ ì‹œ ìƒˆ í•¨ìˆ˜
   ```

2. ë˜ëŠ” `setState`ì˜ functional updateë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, `useRef`ë¡œ ìƒíƒœë¥¼ ë”°ë¡œ ì¶”ì í•˜ëŠ” íŒ¨í„´ë„ ìˆìŠµë‹ˆë‹¤. (ì¢€ ë” ê³ ê¸‰ íŒ¨í„´)

### (2) â€œeslint-plugin-react-hooksâ€ë¥¼ ì ê·¹ì ìœ¼ë¡œ ë¯¿ê¸° ğŸ§‘â€âš–ï¸

* `useCallback` / `useMemo` / `useEffect`ì˜ depsë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•´ì„œ ì•Œë ¤ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.
* `deps`ì—ì„œ ë¹ ì§„ ë³€ìˆ˜ë“¤ì„ ê²½ê³ í•´ ì¤ë‹ˆë‹¤.
* ëŒ€ë¶€ë¶„ì˜ ê²½ìš° **ê²½ê³ ê°€ ë§ìŠµë‹ˆë‹¤.** (ê²½ê³ ë¥¼ ì–µì§€ë¡œ ë¬´ì‹œí•˜ë©´ stale closure ì§€ì˜¥ìœ¼ë¡œ...)

ì‹¤ì „ íŒ:

> 1. ì¼ë‹¨ ê°œë°œí•  ë•ŒëŠ” **ê²½ê³ ë¥¼ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ depsë¥¼ ì±„ìš´ë‹¤.**
> 2. ì •ë§ë¡œ â€œì˜ë„ì ìœ¼ë¡œâ€ ë¹¼ì•¼ í•  ë•Œë§Œ `// eslint-disable-next-line`ì„ ë¶™ì¸ë‹¤.

---

## 7. useCallbackì„ â€œë‚¨ìš©â€í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  ğŸ§±

ë§ì€ ì´ˆë³´ìë“¤ì´ â€œì„±ëŠ¥ì„ ìœ„í•´ ëª¨ë“  í•¨ìˆ˜ì— `useCallback`ì„ ë¶™ì´ë©´ ì¢‹ê² ì§€?â€ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.
â†’ **ì ˆëŒ€ ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤.**

ì´ìœ :

1. `useCallback` ìì²´ë„ **ë¹„ìš©**ì´ ìˆìŠµë‹ˆë‹¤. (deps ë¹„êµ, Hook ê´€ë¦¬ ë“±)
2. í•¨ìˆ˜ í•˜ë‚˜ ë§Œë“œëŠ” ë¹„ìš©ë³´ë‹¤, `useCallback`ì´ ëŒì•„ê°€ëŠ” ë¹„ìš©ì´ **ë” í´ ë•Œê°€ ë§ìŠµë‹ˆë‹¤.**
3. memoizationì€ í•­ìƒ **â€œtrade-offâ€**ì…ë‹ˆë‹¤.

   * ë©”ëª¨ë¦¬ + ë¹„êµ ì—°ì‚° â†” ë¶ˆí•„ìš”í•œ ë Œë”ë§ ê°ì†Œ

ê·¸ë˜ì„œ React íŒ€ì´ ê³µì‹ ë¬¸ì„œì—ì„œ ë§í•˜ëŠ” íŒ¨í„´:

> * `React.memo`ì™€ í•¨ê»˜ ì“°ëŠ” ì½œë°± props
> * depsì— ë„£ì–´ì•¼ í•˜ëŠ” í•¨ìˆ˜
> * ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ **stable callback**ì„ ìš”êµ¬í•˜ëŠ” ê²½ìš°
>   ì´ ì •ë„ê°€ â€œuseCallback ì“¸ ë§Œí•œ ì§€ì â€ì…ë‹ˆë‹¤.

ì‹¤ì „ ê°€ì´ë“œë¼ì¸:

* ë¶€ëª¨-ìì‹ êµ¬ì¡°ì—ì„œ

  * ìì‹ì— `React.memo`ë¥¼ ì”Œì› ê³ 
  * ë¶€ëª¨ì—ì„œ ìì‹ì—ê²Œ ë„˜ê¸°ëŠ” props ì¤‘ **í•¨ìˆ˜**ê°€ ìˆë‹¤ë©´
    â†’ ê·¸ í•¨ìˆ˜ì— `useCallback`ì„ ê³ ë ¤
* ê·¸ ì™¸ì˜ ê·¸ëƒ¥ ë‚´ë¶€ì—ì„œ ì“°ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ”
  ê·¸ëƒ¥ ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ë„ ëŒ€ë¶€ë¶„ ìƒê´€ ì—†ìŒ.

---

## 8. ê°„ë‹¨í•œ ì‹¤ì „ ì˜ˆì œ ì •ë¦¬ âœ¨

### ì˜ˆì œ 1: React.memo + useCallback ê¸°ë³¸ íŒ¨í„´

```jsx
import React, { useState, useCallback } from 'react';

const TodoItem = React.memo(function TodoItem({ todo, onToggle }) {
  console.log('TodoItem render:', todo.id);
  return (
    <li>
      <label>
        <input
          type="checkbox"
          checked={todo.done}
          onChange={() => onToggle(todo.id)}
        />
        {todo.text}
      </label>
    </li>
  );
});

function TodoList() {
  const [todos, setTodos] = useState([
    { id: 1, text: 'React ê³µë¶€', done: false },
    { id: 2, text: 'useCallback ì´í•´í•˜ê¸°', done: false },
  ]);

  const handleToggle = useCallback((id) => {
    setTodos((prev) =>
      prev.map((todo) =>
        todo.id === id ? { ...todo, done: !todo.done } : todo
      )
    );
  }, []); // âœ… setState í•¨ìˆ˜ëŠ” stableì´ë¯€ë¡œ deps í•„ìš” ì—†ìŒ

  return (
    <ul>
      {todos.map((todo) => (
        <TodoItem key={todo.id} todo={todo} onToggle={handleToggle} />
      ))}
    </ul>
  );
}
```

í¬ì¸íŠ¸:

* `TodoItem`ì€ `React.memo`ë¡œ ê°ì‹¸ì ¸ ìˆìŒ
* `onToggle`ì€ `useCallback`ìœ¼ë¡œ ì•ˆì •í™”
* todosê°€ ë°”ë€Œì–´ í•´ë‹¹ í•­ëª©ë§Œ ë Œë”ë§ë˜ë©°, ë‚˜ë¨¸ì§€ëŠ” ìŠ¤í‚µ

---

### ì˜ˆì œ 2: useCallback + useEffect ì¡°í•©

```jsx
function AutoSaver({ content }) {
  const save = useCallback(() => {
    console.log('ìë™ ì €ì¥:', content);
    // ì‹¤ì œ API í˜¸ì¶œ ë¡œì§
  }, [content]); // âœ… contentê°€ ë°”ë€Œë©´ ìƒˆ í•¨ìˆ˜

  useEffect(() => {
    const id = setInterval(save, 5000);
    return () => clearInterval(id);
  }, [save]); // âœ… saveê°€ ë°”ë€” ë•Œë§Œ íƒ€ì´ë¨¸ ì¬ì„¤ì •

  return <div>ì‘ì„± ì¤‘: {content}</div>;
}
```

---

## 9. í•œ ë²ˆì— ì •ë¦¬í•˜ëŠ” useCallback ì²´í¬ë¦¬ìŠ¤íŠ¸ âœ…

ë§ˆë¬´ë¦¬ë¡œ, ê°•ì˜ ìŠ¬ë¼ì´ë“œì— ë°”ë¡œ ë„£ìœ¼ì…”ë„ ë ë§Œí•œ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ğŸ˜‰

**ì–¸ì œ `useCallback`ì„ ì“°ë‚˜?**

* [ ] ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ `React.memo`ë¡œ ê°ì‹¸ì ¸ ìˆë‹¤.
* [ ] ìì‹ì—ê²Œ **í•¨ìˆ˜í˜• props**ë¥¼ ë„˜ê¸´ë‹¤.
* [ ] ê·¸ í•¨ìˆ˜ ë•Œë¬¸ì— ìì‹ì´ ë¶ˆí•„ìš”í•˜ê²Œ ìì£¼ ë¦¬ë Œë”ë§ëœë‹¤.
* [ ] `useEffect`/`useMemo`ì˜ depsì— **í•¨ìˆ˜**ë¥¼ ë„£ì–´ì•¼ í•œë‹¤.
* [ ] ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬/ì»¤ìŠ¤í…€ í›…ì´ **stable callback**ì„ ìš”êµ¬í•œë‹¤.

**depsëŠ” ì–´ë–»ê²Œ ì‘ì„±í•˜ë‚˜?**

* [ ] ì½œë°± ì•ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì™¸ë¶€ ë³€ìˆ˜(state, props, í•¨ìˆ˜)ë¥¼ depsì— ë„£ëŠ”ë‹¤.
* [ ] `eslint-plugin-react-hooks`ì˜ ê²½ê³ ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‹ ë¢°í•œë‹¤.
* [ ] ì •ë§ ì˜ë„ì ìœ¼ë¡œ ê³ ì •í•˜ê³  ì‹¶ì„ ë•Œë§Œ depsë¥¼ `[]`ë¡œ ë‘”ë‹¤.

**ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•  ë•Œ**

* [ ] ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œë§Œ ì“°ëŠ” ê°„ë‹¨í•œ onClick, onChange í•¸ë“¤ëŸ¬ë“¤
* [ ] ì„±ëŠ¥ ë¬¸ì œë¥¼ ì¸¡ì •í•˜ì§€ ì•Šì•˜ëŠ”ë°, â€œê·¸ëƒ¥ ì¢‹ì€ ê²ƒ ê°™ì•„ì„œâ€ ì „ë¶€ useCallbackìœ¼ë¡œ ê°ìŒ€ ë•Œ
* [ ] deps ê´€ë¦¬ê°€ ë„ˆë¬´ ë³µì¡í•´ì ¸ ì˜¤íˆë ¤ ì½”ë“œë¥¼ ì½ê¸° ì–´ë µê²Œ ë§Œë“¤ ë•Œ

---

## 10. ë§ˆë¬´ë¦¬ ğŸ§©

ì •ë¦¬í•˜ë©´, `useCallback`ì€:

* **â€œí•¨ìˆ˜ì˜ ì°¸ì¡°ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” í›…â€**ì´ê³ 
* **React.memo / deps ë°°ì—´ / ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì™€ì˜ ìƒí˜¸ì‘ìš© ì†ì—ì„œ ì§„ê°€ë¥¼ ë°œíœ˜í•©ë‹ˆë‹¤.
* ë¬´ì¡°ê±´ ë§ì´ ì“°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ì¸¡ì • ê°€ëŠ¥í•œ ì„±ëŠ¥ ë¬¸ì œ**ê°€ ìˆì„ ë•Œ â€œì •ë°€í•˜ê²Œâ€ ì‚¬ìš©í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

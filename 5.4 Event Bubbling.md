

# 🌊 이벤트 버블링(Event Bubbling)

웹 브라우저에서 이벤트가 발생하면, 그 이벤트는 **한 지점에서 시작해 상위 요소로 전파되는 흐름**을 갖습니다.
그 대표적인 전파 방식이 바로 **이벤트 버블링(Event Bubbling)** 입니다.

---

# 1. 🫧 이벤트 버블링이란?

> **어떤 요소에서 발생한 이벤트가 그 요소의 상위 요소(parent → 더 상위 → 최상위)로 단계적으로 전파되는 현상**을 말합니다.

즉,

* 클릭한 요소 → 부모 → 조부모 → `<body>` → `<html>`
  이런 순서로 **거품(bubble)** 이 표면으로 떠오르듯 전달되기 때문에 “버블링”이라는 이름이 붙었습니다.

---

# 2. 🧪 간단한 예시로 이해하기

### HTML 구조

```html
<div id="parent">
  <button id="child">Click me</button>
</div>
```

### JS 이벤트 핸들러

```javascript
document.getElementById("parent").addEventListener("click", () => {
  console.log("부모 클릭!");
});

document.getElementById("child").addEventListener("click", () => {
  console.log("자식 클릭!");
});
```

#### 사용자가 **자식 버튼(child)** 을 클릭하면 로그 순서:

```
자식 클릭!
부모 클릭!
```

자식 요소에서 발생한 클릭 이벤트가 **부모 요소로 전파되기 때문**입니다.

---

# 3. 🔍 이벤트 전파 단계(Event Propagation Phases)

브라우저의 이벤트 전파는 3단계로 구성됩니다.

| 단계                              | 설명                              |
| ------------------------------- | ------------------------------- |
| **1. Capturing Phase (캡처링 단계)** | 최상위(document) → 이벤트 발생 요소까지 내려옴 |
| **2. Target Phase (타깃 단계)**     | 실제 이벤트가 발생한 요소에 도착              |
| **3. Bubbling Phase (버블링 단계)**  | 이벤트 발생 요소 → 상위 요소로 다시 올라감       |

### 시각적 흐름

```
document
  ↓ (capturing)
html
  ↓
body
  ↓
div(parent)
  ↓
button(child) ← 이벤트 발생 (target)
  ↑ (bubbling)
div(parent)
  ↑
body
  ↑
html
  ↑
document
```

---

# 4. 😎 이벤트 버블링이 왜 중요한가?

### 📌 성능 좋은 이벤트 처리(Event Delegation)를 가능하게 함

**이벤트 델리게이션(Event Delegation)** 은 버블링을 활용해
"하위 모든 요소에 이벤트를 개별 등록하지 않고, **상위 요소에 한 번만 등록**하는 기법"입니다.

예:
수백 개 리스트 항목들에 각각 클릭 이벤트를 달 필요 없이
**부모 `<ul>`에만 onClick을 걸어도 모든 클릭을 감지할 수 있음**

React는 바로 이 **이벤트 델리게이션**을 내부에서 적극적으로 사용합니다.

---

# 5. 🛑 버블링을 막고 싶다면?

### 1) `event.stopPropagation()`

현재 요소까지만 이벤트를 처리하고, 상위 요소로 올라가는 것을 막음.

```javascript
button.addEventListener("click", (e) => {
  e.stopPropagation();
});
```

### 2) `event.stopImmediatePropagation()`

동일 요소에 등록된 다른 이벤트 리스너 호출까지도 막음.

---

# 6. ⚛️ React에서의 이벤트 버블링

React의 SyntheticEvent도 **기본적으로 DOM의 버블링 방식 그대로 따릅니다.**

```jsx
<div onClick={() => console.log("부모 클릭")}>
  <button onClick={(e) => {
    e.stopPropagation();
    console.log("자식 클릭");
  }}>
    버튼
  </button>
</div>
```

출력:

```
자식 클릭
```

부모까지 올라가지 않습니다.

---

# 7. 🧠 가장 많이 나오는 오해 정리

### ❌ “버블링은 클릭 이벤트만 있는 것 아닌가?”

✔ 대부분의 이벤트가 버블링되지만,
**focus, blur, scroll 등 일부 이벤트는 버블링되지 않음**

React에서는 focus/blur도 **SyntheticEvent로 버블링 가능** 형태로 감싸서 동작합니다.

---

# 8. 🎯 이벤트 버블링 요약

* 이벤트는 발생한 요소에서 시작해 **상위 요소로 전파됨**
* 이는 브라우저의 **기본 동작**
* 성능 최적화 기법인 **이벤트 델리게이션**에서 매우 중요
* 필요하면 **stopPropagation()** 으로 막을 수 있음
* React도 이 버블링 모델을 그대로 이용해 자체 이벤트 시스템(SyntheticEvent)을 구현



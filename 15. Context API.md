ë¦¬ì•¡íŠ¸ì˜ Context APIëŠ”
â€œì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ì „ì—­(or ì¤€ì „ì—­) ë°ì´í„°ë¥¼ ê¹”ë”í•˜ê²Œ ê³µìœ í•˜ê¸° ìœ„í•œ ê³µì‹ ë©”ì»¤ë‹ˆì¦˜â€ ì…ë‹ˆë‹¤. ğŸŒ
`props drilling` ì§€ì˜¥ì—ì„œ íƒˆì¶œí•˜ê³ , í…Œë§ˆ/ë¡œê·¸ì¸ ì •ë³´/ì–¸ì–´ ì„¤ì • ê°™ì€ ê±¸ íŠ¸ë¦¬ ê¹Šìˆ™í•œ ì»´í¬ë„ŒíŠ¸ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ ì „ë‹¬í•˜ëŠ” ë° ì“°ì£ .

ì´ë²ˆ ê¸€ì—ì„œëŠ” **ê¸°ì´ˆ ê°œë… â†’ ì½”ë“œ ì‚¬ìš©ë²• â†’ ë‚´ë¶€ ë™ì‘ ê°œë… â†’ ì„±ëŠ¥/ì£¼ì˜ì  â†’ ì‹¤ì „ íŒ¨í„´**ê¹Œì§€ ìˆœì„œëŒ€ë¡œ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤. ğŸ’ª

---

## 1. Context APIëŠ” ì™œ ìƒê²¼ë‚˜? ğŸ¤”

ë¦¬ì•¡íŠ¸ì—ì„œ ë°ì´í„° ì „ë‹¬ì˜ ê¸°ë³¸ì€ `props`ì…ë‹ˆë‹¤.

```jsx
<App>
  <Layout>
    <Header>
      <UserMenu />
    </Header>
  </Layout>
</App>
```

ì˜ˆë¥¼ ë“¤ì–´ `UserMenu`ì—ì„œ í˜„ì¬ ë¡œê·¸ì¸ ìœ ì € ì •ë³´ë¥¼ ì¨ì•¼ í•œë‹¤ê³  í•´ë³´ê² ìŠµë‹ˆë‹¤.

```txt
App (user)
 â””â”€ Layout (user)
     â””â”€ Header (user)
         â””â”€ UserMenu (userë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ê³³)
```

ëª¨ì–‘ìƒˆê°€ ì´ë ‡ê²Œ ë©ë‹ˆë‹¤:

```jsx
function App() {
  const user = { name: 'í™ê¸¸ë™', role: 'admin' };
  return <Layout user={user} />;
}

function Layout({ user }) {
  return <Header user={user} />;
}

function Header({ user }) {
  return <UserMenu user={user} />;
}

function UserMenu({ user }) {
  return <div>{user.name}ë‹˜ ì•ˆë…•í•˜ì„¸ìš”</div>;
}
```

ë¬¸ì œì  ğŸ˜µ

* `Layout`, `Header`ëŠ” **userë¥¼ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë°ë„** propsë¡œ ê³„ì† ì „ë‹¬í•´ì•¼ í•¨ (props drilling).
* ì „ì—­ì ìœ¼ë¡œ ì“°ëŠ” ê°’ì´ ë§ì•„ì§ˆìˆ˜ë¡ (`theme`, `auth`, `locale`, `config` â€¦)
  â†’ ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ê°€ â€œíƒë°° ì•„ì €ì”¨â€ê°€ ë˜ì–´ë²„ë¦¼.
* êµ¬ì¡°ê°€ ë°”ë€Œê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ê°€ ì¶”ê°€ë˜ë©´, **ì¤‘ê°„ ê³„ì¸µë“¤ì˜ propsë¥¼ ê³„ì† ìˆ˜ì •**í•´ì•¼ í•´ì„œ ìœ ì§€ë³´ìˆ˜ê°€ í˜ë“¤ì–´ì§.

â¡ï¸ ì´ëŸ° ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ ê²ƒì´ **Context API**ì…ë‹ˆë‹¤. ğŸ™Œ

---

## 2. Context APIì˜ í•µì‹¬ ê°œë… 3ê°€ì§€ ğŸ§ 

Context APIëŠ” í¬ê²Œ ì„¸ ê°€ì§€ë¡œ ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤:

1. `createContext` â€“ â€œì „ì—­ ìƒíƒœì˜ ì¢…ë¥˜â€ë¥¼ ì •ì˜í•˜ëŠ” **Context ê°ì²´ ìƒì„±**
2. `Context.Provider` â€“ ì´ Contextì˜ ê°’ì„ ì‹¤ì œë¡œ **ê³µê¸‰í•˜ëŠ” ê³µê¸‰ì**
3. `useContext(Context)` â€“ í˜„ì¬ íŠ¸ë¦¬ì—ì„œ **ê°€ì¥ ê°€ê¹Œìš´ Providerì˜ ê°’**ì„ êº¼ë‚´ ì“°ëŠ” í›…

ì¡°í•©í•˜ë©´ í•œ ë¬¸ì¥ìœ¼ë¡œ:

> â€œContext ê°ì²´ë¥¼ ë§Œë“¤ê³ , Providerë¡œ ê°’ì„ ê°ì‹¼ ë’¤, useContextë¡œ ê·¸ ê°’ì„ êº¼ë‚´ ì“°ëŠ” íŒ¨í„´â€

---

## 3. ê°€ì¥ ê¸°ë³¸ì ì¸ ì‚¬ìš© ì˜ˆì œ: í…Œë§ˆ Context ğŸ¨

### 3-1. Context ë§Œë“¤ê¸° â€“ `createContext`

```jsx
// theme-context.js
import { createContext } from 'react';

// Contextë¥¼ í•˜ë‚˜ ë§Œë“ ë‹¤. (ë””í´íŠ¸ ê°’ì€ 'light')
export const ThemeContext = createContext('light');
```

ì—¬ê¸°ì„œ `createContext`ëŠ” **â€œí…Œë§ˆë¼ëŠ” ì¢…ë¥˜ì˜ ì „ì—­ ë°ì´í„° í†µë¡œâ€**ë¥¼ í•˜ë‚˜ ë§Œë“ ë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

* `ThemeContext` ì•ˆì—ëŠ” ë¦¬ì•¡íŠ¸ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì •ë³´(Provider/Consumer ë“±ì´ í¬í•¨)ë“¤ì´ ë“¤ì–´ìˆì–´ìš”.
* ì•„ì§ ì‹¤ì œ ê°’ì€ ì—†ìŠµë‹ˆë‹¤. ê·¸ëƒ¥ â€œíƒ€ì…, ì±„ë„, í†µë¡œâ€ ì •ì˜ì— ê°€ê¹ìŠµë‹ˆë‹¤.

---

### 3-2. Providerë¡œ ê°’ ê³µê¸‰í•˜ê¸° â€“ `ThemeContext.Provider`

```jsx
// App.jsx
import { useState } from 'react';
import { ThemeContext } from './theme-context';
import Page from './Page';

function App() {
  const [theme, setTheme] = useState('light');

  const toggleTheme = () => {
    setTheme((prev) => (prev === 'light' ? 'dark' : 'light'));
  };

  return (
    // Providerë¡œ ê°ì‹¸ê³  valueì— ì‹¤ì œ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      <Page />
    </ThemeContext.Provider>
  );
}

export default App;
```

ì—¬ê¸°ì—ì„œ ì¤‘ìš”í•œ í¬ì¸íŠ¸:

* `ThemeContext.Provider`ëŠ” **íŠ¹ì • ì„œë¸ŒíŠ¸ë¦¬ ì „ì²´ì— ê°’ì„ í˜ë ¤ë³´ë‚´ëŠ” ì—­í• **ì„ í•©ë‹ˆë‹¤.
* `value` propì— ë„£ì€ ê°’ì€ íŠ¸ë¦¬ ì–´ë””ì—ì„œë“  `useContext(ThemeContext)`ë¡œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* `value`ê°€ ë³€ê²½ë˜ë©´, **í•´ë‹¹ Contextë¥¼ êµ¬ë… ì¤‘ì¸ ëª¨ë“  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§**ë©ë‹ˆë‹¤.

---

### 3-3. useContextë¡œ ê°’ ì†Œë¹„í•˜ê¸° â€“ `useContext(ThemeContext)`

```jsx
// Page.jsx
import { useContext } from 'react';
import { ThemeContext } from './theme-context';

function Page() {
  const { theme, toggleTheme } = useContext(ThemeContext);

  const styles = {
    backgroundColor: theme === 'light' ? '#ffffff' : '#111827',
    color: theme === 'light' ? '#111827' : '#f9fafb',
    minHeight: '100vh',
    padding: 24,
  };

  return (
    <div style={styles}>
      <h1>Context API Theme Demo</h1>
      <p>í˜„ì¬ í…Œë§ˆ: {theme}</p>
      <button onClick={toggleTheme}>í…Œë§ˆ í† ê¸€</button>
    </div>
  );
}

export default Page;
```

ì—¬ê¸°ì„œ `useContext(ThemeContext)`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì´ë ‡ê²Œ ë™ì‘í•œë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤:

1. í˜„ì¬ ì´ ì»´í¬ë„ŒíŠ¸ê°€ ì†í•œ Fiber íŠ¸ë¦¬ì—ì„œ,
2. **ê°€ì¥ ê°€ê¹Œìš´ `ThemeContext.Provider`ë¥¼ ì°¾ê³ **,
3. ê·¸ Providerì˜ `value`ë¥¼ ë°˜í™˜í•œë‹¤.
4. Providerì˜ `value`ê°€ ë°”ë€Œë©´, ì´ ì»´í¬ë„ŒíŠ¸ë„ ë‹¤ì‹œ ë Œë”ë§ëœë‹¤.

---

## 4. Contextì˜ ë””í´íŠ¸ ê°’ê³¼ Providerê°€ ì—†ì„ ë•Œ ğŸª«

`createContext(defaultValue)`ì—ì„œ ì¤€ ê°’ì€ **Providerê°€ ì—†ì„ ë•Œë§Œ** ì‚¬ìš©ë©ë‹ˆë‹¤.

```jsx
const LocaleContext = createContext('ko'); // ë””í´íŠ¸: 'ko'

function ShowLocale() {
  const locale = useContext(LocaleContext);
  return <div>í˜„ì¬ ì–¸ì–´: {locale}</div>;
}
```

* ë§Œì•½ `ShowLocale`ì´ **ì–´ë–¤ Providerë¡œë„ ê°ì‹¸ì ¸ ìˆì§€ ì•Šë‹¤ë©´** â†’ `locale`ì€ `'ko'`.
* Providerë¡œ ê°ì‹¸ì„œ `value="en"`ì„ ë„£ìœ¼ë©´ â†’ `locale`ì€ `'en'`.

```jsx
// 1) Provider ì—†ì´ ì‚¬ìš©í•  ë•Œ
<ShowLocale />          // 'ko'

// 2) Providerë¡œ ê°ì‹¼ ê²½ìš°
<LocaleContext.Provider value="en">
  <ShowLocale />        // 'en'
</LocaleContext.Provider>
```

---

## 5. Context ì—…ë°ì´íŠ¸ëŠ” ì–´ë–»ê²Œ ë™ì‘í•˜ë‚˜? ğŸ”„

Contextì˜ ì‹¤ì œ ê°’ì€ ë³´í†µ **state + Provider** ì¡°í•©ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

```jsx
const [user, setUser] = useState(null);

<UserContext.Provider value={{ user, setUser }}>
  {children}
</UserContext.Provider>
```

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì :

* `value` prop ìì²´ê°€ **ìƒˆë¡œìš´ ì°¸ì¡°**ë¡œ ë°”ë€Œë©´,
  ê·¸ Contextë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë©ë‹ˆë‹¤.

ì˜ˆ:

```jsx
// ì•ˆ ì¢‹ì€ íŒ¨í„´ âš 
<UserContext.Provider value={{ user, setUser, extra: Math.random() }}>
  {children}
</UserContext.Provider>
```

* ë Œë”ë§í•  ë•Œë§ˆë‹¤ `Math.random()`ì´ ë°”ë€Œë©´ì„œ `value` ê°ì²´ê°€ í•­ìƒ ìƒˆë¡œì›Œì§
* userê°€ ì•ˆ ë³€í•´ë„ `value` ì°¸ì¡°ê°€ ë§¤ ë Œë”ë§ˆë‹¤ ë‹¤ë¦„ â†’ êµ¬ë… ì¤‘ì¸ ì»´í¬ë„ŒíŠ¸ê°€ ì „ë¶€ ë¦¬ë Œë”

ê·¸ë˜ì„œ ë³´í†µ `useMemo`ë¡œ ê°ì‹¸ê±°ë‚˜, Contextë¥¼ ì˜ ìª¼ê°œëŠ” íŒ¨í„´ì„ ì“°ê²Œ ë©ë‹ˆë‹¤. (ë’¤ì—ì„œ ì„¤ëª…)

```jsx
const value = useMemo(
  () => ({ user, setUser }),
  [user] // userê°€ ë°”ë€” ë•Œë§Œ ìƒˆ ê°ì²´
);

<UserContext.Provider value={value}>{children}</UserContext.Provider>
```

---

## 6. Context + useReducer íŒ¨í„´ (ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¯¸ë‹ˆ ë²„ì „) âš™ï¸

ContextëŠ” **â€œì „ì—­ ìƒíƒœë¥¼ ì–´ë””ì„œë“  êº¼ë‚´ ì“¸ ìˆ˜ ìˆê²Œ í•˜ëŠ” í†µë¡œâ€**ì´ê³ ,
`useReducer`ëŠ” **â€œìƒíƒœ ë³€ê²½ ë¡œì§ì„ ê¹”ë”í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë„êµ¬â€**ì…ë‹ˆë‹¤.

ë‘ ê°œë¥¼ í•©ì¹˜ë©´ ë¯¸ë‹ˆ Redux ê°™ì€ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ§©

### 6-1. ì¹´ìš´í„° ì˜ˆì œ

```jsx
// counter-context.js
import { createContext, useContext, useReducer } from 'react';

const CounterStateContext = createContext(null);
const CounterDispatchContext = createContext(null);

function counterReducer(state, action) {
  switch (action.type) {
    case 'INCREMENT':
      return state + 1;
    case 'DECREMENT':
      return state - 1;
    default:
      throw new Error(`Unknown action: ${action.type}`);
  }
}

export function CounterProvider({ children }) {
  const [count, dispatch] = useReducer(counterReducer, 0);

  return (
    <CounterStateContext.Provider value={count}>
      <CounterDispatchContext.Provider value={dispatch}>
        {children}
      </CounterDispatchContext.Provider>
    </CounterStateContext.Provider>
  );
}

// ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ê°ì‹¸ê¸°
export function useCounterState() {
  const state = useContext(CounterStateContext);
  if (state === null) {
    throw new Error('useCounterState must be used within CounterProvider');
  }
  return state;
}

export function useCounterDispatch() {
  const dispatch = useContext(CounterDispatchContext);
  if (dispatch === null) {
    throw new Error('useCounterDispatch must be used within CounterProvider');
  }
  return dispatch;
}
```

ì‚¬ìš© ì¸¡:

```jsx
// App.jsx
import { CounterProvider } from './counter-context';
import CounterDisplay from './CounterDisplay';
import CounterButtons from './CounterButtons';

function App() {
  return (
    <CounterProvider>
      <CounterDisplay />
      <CounterButtons />
    </CounterProvider>
  );
}
```

```jsx
// CounterDisplay.jsx
import { useCounterState } from './counter-context';

function CounterDisplay() {
  const count = useCounterState();
  return <h1>Count: {count}</h1>;
}

export default CounterDisplay;
```

```jsx
// CounterButtons.jsx
import { useCounterDispatch } from './counter-context';

function CounterButtons() {
  const dispatch = useCounterDispatch();

  return (
    <div>
      <button onClick={() => dispatch({ type: 'DECREMENT' })}>-1</button>
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>+1</button>
    </div>
  );
}

export default CounterButtons;
```

ì—¬ê¸°ì„œ íŒ¨í„´ í¬ì¸íŠ¸:

* ìƒíƒœ (`count`)ì™€ ì•¡ì…˜ ë°œí–‰ (`dispatch`)ì„ **ë‹¤ë¥¸ Contextë¡œ ë¶„ë¦¬**
  â†’ ë””ìŠ¤íŒ¨ì¹˜ë§Œ ì“°ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ìƒíƒœ ë³€ê²½ ì‹œ ë¦¬ë Œë” ì˜í–¥ì„ ëœ ë°›ê²Œ ì„¤ê³„ ê°€ëŠ¥.
* ì»¤ìŠ¤í…€ í›…(`useCounterState`, `useCounterDispatch`)ìœ¼ë¡œ ê°ì‹¸ì„œ
  **Provider ì•ˆì—ì„œë§Œ ì‚¬ìš©ë˜ë„ë¡ ê°•ì œ** + íƒ€ì…/ì‚¬ìš© ìœ„ì¹˜ë¥¼ ëª…í™•íˆ.

---

## 7. Context API ë‚´ë¶€ ë™ì‘ ê°œë… (Fiber ê¸°ì¤€ìœ¼ë¡œ) ğŸ§¬

(ì´ë¯¸ Fiber, hook.memoizedState ë“±ì— ê´€ì‹¬ ë§ìœ¼ì‹œë‹ˆ ì¡°ê¸ˆ ë” ë‚´ë¶€ì ìœ¼ë¡œ ì„¤ëª…í•´ë³¼ê²Œìš”.)

### 7-1. íŠ¸ë¦¬ì— â€œContext ê°’ ë ˆì´ì–´â€ë¥¼ ê¹”ì•„ ë‘”ë‹¤

* ê° ProviderëŠ” Fiber íŠ¸ë¦¬ì— **â€œì´ Contextì˜ í˜„ì¬ ê°’â€ì„ ë“¤ê³  ìˆëŠ” ë…¸ë“œ**ì…ë‹ˆë‹¤.
* ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ `useContext(SomeContext)`ë¥¼ í˜¸ì¶œí•˜ë©´,

  * ë¦¬ì•¡íŠ¸ëŠ” í˜„ì¬ Fiberì—ì„œ ìœ„ìª½ìœ¼ë¡œ ì˜¬ë¼ê°€ë©´ì„œ,
  * `SomeContext`ì— í•´ë‹¹í•˜ëŠ” **ê°€ì¥ ê°€ê¹Œìš´ Provider**ë¥¼ ì°¾ê³ ,
  * ê·¸ Providerê°€ ê°€ì§„ `value`ë¥¼ ê°€ì ¸ì™€ì„œ í›…ì˜ `memoizedState`ì— ì €ì¥í•©ë‹ˆë‹¤.

### 7-2. Context ê°’ ë³€ê²½ â†’ êµ¬ë… ì¤‘ì¸ Fiber ë‹¤ì‹œ ë Œë”

* Providerì˜ `value`ê°€ ë°”ë€Œë©´,
* ë¦¬ì•¡íŠ¸ëŠ” ì´ Contextë¥¼ ì‚¬ìš©í•˜ëŠ” í•˜ìœ„ Fiberë“¤ì„ ì°¾ì•„ì„œ **ì—…ë°ì´íŠ¸ íì— ë“±ë¡**í•©ë‹ˆë‹¤.
* ë‹¤ìŒ ë Œë” ì‚¬ì´í´ì—ì„œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë“¤ì˜ í•¨ìˆ˜ê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ë©´ì„œ
  `useContext` í˜¸ì¶œ ì‹œ **ìƒˆë¡œìš´ value**ë¥¼ ì½ì–´ì˜¤ê²Œ ë©ë‹ˆë‹¤.

ì´ ê´€ì ì—ì„œ ë³´ë©´:

* Context + useContextëŠ” ì‚¬ì‹¤ìƒ `useState`ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ,
  â€œ**ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ìƒíƒœë¥¼ ê³µìœ **â€í•œë‹¤ëŠ” ì ì´ ë‹¤ë¦…ë‹ˆë‹¤.
* ê·¸ë¦¬ê³  êµ¬ë… ë‹¨ìœ„ê°€ **Contextë‹¹, Provider í•˜ìœ„ ì„œë¸ŒíŠ¸ë¦¬ ì „ì²´**ë¼ëŠ” ì ì´ í¬ì¸íŠ¸ì…ë‹ˆë‹¤.

---

## 8. ì–¸ì œ Contextë¥¼ ì¨ì•¼ í• ê¹Œ? âœ… / âŒ

### âœ… Contextë¥¼ ì“°ê¸° ì¢‹ì€ ê²½ìš°

* **ì „ì—­ ì„¤ì •ê°’** (í…Œë§ˆ, ì–¸ì–´, ì‹œê°„ëŒ€ ë“±)
* **í˜„ì¬ ë¡œê·¸ì¸ ìœ ì € ì •ë³´** (user, ê¶Œí•œ, í† í° ë“±)
* **ë¼ìš°í„° ì •ë³´** (í˜„ì¬ ë¼ìš°íŠ¸, params ë“± â€“ ì‹¤ì œë¡œ React Routerë„ Contextë¥¼ ì‚¬ìš©)
* **í¼ ë¼ì´ë¸ŒëŸ¬ë¦¬, UI ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‚´ë¶€ ê³µìœ  ìƒíƒœ**

íŠ¹ì§•:

* â€œì•±ì˜ ë§ì€ ê³³ì—ì„œ ê³µìœ í•´ì•¼ í•˜ëŠ” ê°’â€
* â€œì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ê°€ ê·¸ ê°’ì„ ì§ì ‘ ì‚¬ìš©í•˜ì§„ ì•Šì§€ë§Œ, ì•„ë˜ë¡œ ê³„ì† ì „ë‹¬í•´ì•¼ í•˜ëŠ” ê°’â€

---

### âŒ Contextë¥¼ ê³¼í•˜ê²Œ ì“°ê¸° ì¢‹ì€(?) ì•ˆì¢‹ì€ ê²½ìš°

* ê·¸ëƒ¥ **ë‘ì„¸ ë‹¨ê³„ ì •ë„ë§Œ ë‚´ë ¤ê°€ëŠ” ë°ì´í„°**ì¸ë°ë„ ë¬´ì¡°ê±´ Contextë¶€í„° ë„ì…í•˜ëŠ” ê²½ìš°
* ê³ ë¹ˆë„ ì—…ë°ì´íŠ¸ ë˜ëŠ” ê°’(ì‹¤ì‹œê°„ ì…ë ¥ê°’, ë§ˆìš°ìŠ¤ ìœ„ì¹˜ ë“±)ì„ í° Context í•˜ë‚˜ì— ëª¨ë‘ ë„£ëŠ” ê²½ìš°
  â†’ êµ¬ë… ì¤‘ì¸ ì»´í¬ë„ŒíŠ¸ê°€ ì „ë¶€ ë¦¬ë Œë” â†’ ì„±ëŠ¥ ì´ìŠˆ

ë¦¬ì•¡íŠ¸ íŒ€ì˜ ê³µì‹ ê°€ì´ë“œë„:

> ContextëŠ” â€œì „ì—­ì ì¸â€ ëŠë‚Œì´ ê°•í•´ì„œ **ë‚¨ìš©í•˜ë©´ ì½”ë“œ ì¶”ì ì´ ì–´ë ¤ì›Œì§€ê³ **
> í…ŒìŠ¤íŠ¸/ë””ë²„ê¹… ë‚œì´ë„ê°€ ì˜¬ë¼ê°„ë‹¤ê³  ê²½ê³ í•©ë‹ˆë‹¤. ğŸ˜…

---

## 9. ì„±ëŠ¥ ì´ìŠˆ & ìµœì í™” íŒ¨í„´ ğŸš€

Contextì˜ ê°€ì¥ í° ë‹¨ì  ì¤‘ í•˜ë‚˜ê°€ **ë¦¬ë Œë” ì „íŒŒ ë²”ìœ„**ì…ë‹ˆë‹¤.

> â€œProviderì˜ valueê°€ ë°”ë€Œë©´, ê·¸ Contextë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ëœë‹¤.â€

### 9-1. value ê°ì²´ë¥¼ useMemoë¡œ ê°ì‹¸ê¸°

```jsx
function ThemeProvider({ children }) {
  const [theme, setTheme] = useState('light');

  // ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê¸° ìœ„í•´
  const value = useMemo(() => ({ theme, setTheme }), [theme]);

  return (
    <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>
  );
}
```

* `setTheme`ëŠ” ì›ë˜ë¶€í„° ì°¸ì¡°ê°€ ê³ ì •ëœ í•¨ìˆ˜ì§€ë§Œ,
* `{ theme, setTheme }` ê°ì²´ëŠ” ë§¤ ë Œë”ë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ `useMemo`ë¡œ ìµœì í™”.

---

### 9-2. Context ìª¼ê°œê¸°

í•˜ë‚˜ì˜ Contextì— ìƒíƒœë¥¼ ë‹¤ ëª°ì•„ë„£ìœ¼ë©´:

```jsx
// ë‚˜ìœ ì˜ˆ: ëª¨ë“  ì „ì—­ ìƒíƒœë¥¼ í•œ Contextì— ëª°ì•„ë„£ìŒ
const AppContext = createContext({
  user: null,
  theme: 'light',
  locale: 'ko',
  setUser: () => {},
  setTheme: () => {},
  setLocale: () => {},
});
```

* userê°€ ë³€ê²½ë  ë•Œ, themeë§Œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë„ ê´œíˆ ë¦¬ë Œë”.

â¡ï¸ ìƒí™©ì— ë”°ë¼ **Contextë¥¼ ì—­í• ë³„ë¡œ ë¶„ë¦¬**í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

```jsx
const UserContext = createContext(null);
const ThemeContext = createContext('light');
const LocaleContext = createContext('ko');
```

---

### 9-3. â€œSelectorâ€ íŒ¨í„´ (ê³ ê¸‰)

ë¦¬ì•¡íŠ¸ 18 ê¸°ì¤€ìœ¼ë¡œ ê³µì‹ `useContextSelector`ëŠ” ì—†ì§€ë§Œ,
ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(ì˜ˆ: `use-context-selector`)ë‚˜ Zustand ê°™ì€ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´
â€œContext + selectorâ€ íŒ¨í„´ì„ ì´ìš©í•´ **ë¶€ë¶„ì ì¸ êµ¬ë…**ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

ê°œë…ì ìœ¼ë¡œëŠ”:

* ì „ì²´ stateë¥¼ ì „ì—­ storeë¡œ ê´€ë¦¬
* ê° ì»´í¬ë„ŒíŠ¸ëŠ” **ìê¸°ì—ê²Œ í•„ìš”í•œ ì¡°ê°ë§Œ êµ¬ë…**í•˜ë„ë¡ ìµœì í™”

Context ìˆœì •ë§Œìœ¼ë¡œëŠ” ì´ ë¶€ë¶„ì´ ì œí•œì ì´ë¼,
ë³µì¡í•œ ì „ì—­ ìƒíƒœë¥¼ ë‹¤ë¤„ì•¼ í•˜ë©´ Redux/Zustand/Recoil ê°™ì€ ì „ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê³ ë ¤í•˜ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤.

---

## 10. ì‹¤ì „ íŒ¨í„´: â€œProvider ì»´í¬ë„ŒíŠ¸â€ & â€œì»¤ìŠ¤í…€ í›…â€ ğŸ§±

Contextë¥¼ í”„ë¡œì íŠ¸ì—ì„œ ì˜ ì“°ê¸° ìœ„í•œ ê³¨ë“  íŒ¨í„´:

1. Context ê°ì²´ëŠ” **ë³„ë„ íŒŒì¼**ì— ì •ì˜
2. Providerë¥¼ ê°ì‹¼ `XXXProvider` ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“ ë‹¤.
3. `useXXX` ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ `useContext`ë¥¼ ê°ì‹¼ë‹¤.

ì˜ˆì‹œ: Auth Context

```jsx
// auth-context.js
import { createContext, useContext, useState, useMemo } from 'react';

const AuthContext = createContext(null);

export function AuthProvider({ children }) {
  const [user, setUser] = useState(null);

  const login = (userInfo) => {
    setUser(userInfo);
  };

  const logout = () => {
    setUser(null);
  };

  const value = useMemo(
    () => ({ user, isLoggedIn: !!user, login, logout }),
    [user]
  );

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
}

// ì»¤ìŠ¤í…€ í›…
export function useAuth() {
  const ctx = useContext(AuthContext);
  if (ctx === null) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return ctx;
}
```

ì‹¤ì œ ì‚¬ìš©:

```jsx
// App.jsx
import { AuthProvider } from './auth-context';
import AppRoutes from './AppRoutes';

function App() {
  return (
    <AuthProvider>
      <AppRoutes />
    </AuthProvider>
  );
}
```

```jsx
// UserInfo.jsx
import { useAuth } from './auth-context';

function UserInfo() {
  const { user, isLoggedIn, logout } = useAuth();

  if (!isLoggedIn) {
    return <p>ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.</p>;
  }

  return (
    <div>
      <p>{user.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</p>
      <button onClick={logout}>ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  );
}

export default UserInfo;
```

ì´ íŒ¨í„´ì˜ ì¥ì :

* ì»´í¬ë„ŒíŠ¸ ì…ì¥ì—ì„œëŠ” ê·¸ëƒ¥ `useAuth()` ì“°ë©´ ë˜ë‹ˆ **APIê°€ ê¹”ë”**
* Provider ë°–ì—ì„œ ì˜ëª» ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ **ì—ëŸ¬ë¡œ ë°”ë¡œ ì¡ì„ ìˆ˜ ìˆìŒ**
* Context ê´€ë ¨ ë¡œì§ì„ í•œ íŒŒì¼ì— ëª¨ì•„ ë‘¬ì„œ **ì‘ì§‘ë„â†‘, ì¶”ìƒí™” ìˆ˜ì¤€â†‘**

---

## 11. Context vs ë‹¤ë¥¸ ìƒíƒœ ê´€ë¦¬ ë„êµ¬ ë¹„êµ âš–ï¸

| ë„êµ¬              | ì£¼ ìš©ë„                     | ì¥ì                                    | ë‹¨ì                               |
| --------------- | ------------------------ | ------------------------------------ | ------------------------------- |
| `useState`      | ë‹¨ì¼ ì»´í¬ë„ŒíŠ¸/ê·¼ì ‘í•œ ì»´í¬ë„ŒíŠ¸ ê°„ ìƒíƒœ    | ê°„ë‹¨, ì§ê´€ì                               | ê¹Šì€ íŠ¸ë¦¬ ì „íŒŒê°€ ì–´ë µê³  props drilling ë°œìƒ |
| Context API     | ì „ì—­/ì¤€ì „ì—­ ì„¤ì •, ì—¬ëŸ¬ ê³³ì—ì„œ ì°¸ì¡°ë˜ëŠ” ê°’ | ë¦¬ì•¡íŠ¸ ë‚´ì¥, ë¹„êµì  ê°€ë²¼ì›€                      | ë‚¨ìš© ì‹œ êµ¬ì¡° íŒŒì•… ì–´ë ¤ì›€, ì„±ëŠ¥ íŠœë‹ í•„ìš”        |
| Redux / Zustand | ë³µì¡í•œ ì „ì—­ ìƒíƒœ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìºì‹± ë“± | devtools, ë¯¸ë“¤ì›¨ì–´, selector, êµ¬ì¡°í™”ëœ íŒ¨í„´ ì œê³µ | ëŸ¬ë‹ì»¤ë¸Œ, ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ í˜¹ì€ ì¶”ê°€ ì˜ì¡´ì„±         |

ì‹¤ë¬´ì ì¸ ìš”ì•½:

* **ê°„ë‹¨í•œ ì „ì—­ ì„¤ì • ì •ë„** â†’ Context API + useReducer ì¡°í•©ìœ¼ë¡œ ì¶©ë¶„
* **ë³µì¡í•œ ë„ë©”ì¸ ìƒíƒœ/ìºì‹±/ì„œë²„ ìƒíƒœ ë™ê¸°í™”** â†’ Redux, Zustand, TanStack Query ë“± ê³ ë ¤

---

## 12. ìì£¼ ë‚˜ì˜¤ëŠ” ì˜¤í•´ & FAQ ğŸ˜µâ€ğŸ’«

### Q1. Context ì“°ë©´ â€œì§„ì§œ ì „ì—­ ë³€ìˆ˜â€ ê°™ì€ ê±´ê°€ìš”?

* ì•„ë‹ˆìš”. ContextëŠ” **ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ êµ¬ì¡°ì— ì¢…ì†ëœ ì „ì—­**ì…ë‹ˆë‹¤.
* Providerë¡œ ê°ì‹¼ ì„œë¸ŒíŠ¸ë¦¬ ì•ˆì—ì„œë§Œ ìœ íš¨í•˜ê³ ,
  íŠ¸ë¦¬ êµ¬ì¡°ì— ë”°ë¼ ë‹¤ë¥¸ ê°’ë„ ë™ì‹œì— ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
<ThemeContext.Provider value="light">
  <Header />
  <ThemeContext.Provider value="dark">
    <Sidebar />  // ì—¬ê¸°ë§Œ dark
  </ThemeContext.Provider>
</ThemeContext.Provider>
```

### Q2. Contextë¥¼ ì“°ë©´ ReduxëŠ” í•„ìš” ì—†ë‚˜ìš”?

* ê°„ë‹¨í•œ ìˆ˜ì¤€ì—ì„œëŠ” ê·¸ë ‡ì§€ë§Œ,
  **ë¯¸ë“¤ì›¨ì–´, DevTools, ì•¡ì…˜ ë¡œê¹…, strictí•œ íŒ¨í„´** ë“±ì´ í•„ìš”í•˜ë‹¤ë©´ Redux ê³„ì—´ì´ ì—¬ì „íˆ ìœ ìš©í•©ë‹ˆë‹¤.
* ContextëŠ” ì–´ë””ê¹Œì§€ë‚˜ **ì „ë‹¬ ë©”ì»¤ë‹ˆì¦˜**ì´ê³ ,
  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬ì¡°í™”ëŠ” ê°œë°œìê°€ ë”°ë¡œ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.

### Q3. Context ì•ˆì—ì„œ `useState`, `useReducer` ë§‰ ì¨ë„ ë˜ë‚˜ìš”?

* ë„¤, ì˜¤íˆë ¤ ì¼ë°˜ì ì¸ íŒ¨í„´ì…ë‹ˆë‹¤.
* ë‹¤ë§Œ ìì£¼ ë°”ë€ŒëŠ” ê°’ì´ ë§ì€ ê²½ìš° Contextë¥¼ ìª¼ê°œê±°ë‚˜, selector íŒ¨í„´, ì™¸ë¶€ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

---

## ë§ˆë¬´ë¦¬ âœ¨

ì •ë¦¬í•˜ë©´, React Context APIëŠ”:

* props drilling ì—†ì´ ê¹Šì€ ê³³ê¹Œì§€ ê°’ì„ ì „ë‹¬í•´ì£¼ëŠ” **ê³µì‹ í†µë¡œ**ì´ê³ ,
* `createContext` + `Provider` + `useContext` + (ì˜µì…˜ìœ¼ë¡œ `useReducer`, `useMemo`) ì¡°í•©ìœ¼ë¡œ
* **ì „ì—­ ì„¤ì • / ë¡œê·¸ì¸ ì •ë³´ / ë¼ìš°íŒ… ì •ë³´ / UI ë‚´ ê³µí†µ ìƒíƒœ**ë¥¼ ê¹”ë”í•˜ê²Œ ê³µìœ í•˜ê²Œ í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

